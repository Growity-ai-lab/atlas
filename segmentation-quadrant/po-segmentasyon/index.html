<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petrol Ofisi Premium Market - Segment Analizi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; color: #fff; }
        .header { background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(255,255,255,0.1); padding: 8px 14px; display: flex; justify-content: space-between; align-items: center; }
        .header-left { display: flex; align-items: center; gap: 10px; }
        .nav-btn { padding: 5px 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 5px; background: transparent; color: #fff; font-size: 10px; cursor: pointer; text-decoration: none; }
        .nav-btn:hover { background: rgba(255,255,255,0.1); }
        .logo { display: flex; align-items: center; gap: 6px; }
        .logo-icon { width: 26px; height: 26px; background: linear-gradient(135deg, #e31e24, #c41e24); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 9px; }
        .logo-text { font-size: 13px; font-weight: 700; }
        .btn { padding: 5px 10px; border: none; border-radius: 4px; font-size: 9px; font-weight: 600; cursor: pointer; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }
        .main-container { display: flex; height: calc(100vh - 44px); }
        .left-panel { width: 220px; background: rgba(255,255,255,0.02); border-right: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; }
        .panel-header { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .panel-title { font-size: 10px; font-weight: 600; }
        .filter-row { display: flex; gap: 2px; flex-wrap: wrap; margin-top: 5px; }
        .filter-btn { padding: 3px 5px; border: 1px solid rgba(255,255,255,0.15); border-radius: 3px; background: transparent; color: #aaa; font-size: 8px; cursor: pointer; }
        .filter-btn.active { background: rgba(227,30,36,0.2); border-color: #e31e24; color: #e31e24; }
        .segment-list { flex: 1; overflow-y: auto; padding: 4px; }
        .segment-group { margin-bottom: 3px; }
        .segment-group-header { display: flex; align-items: center; justify-content: space-between; padding: 4px 5px; background: rgba(255,255,255,0.05); border-radius: 3px; cursor: pointer; font-size: 8px; font-weight: 600; border-left: 2px solid #666; }
        .segment-items { max-height: 0; overflow: hidden; transition: max-height 0.3s; }
        .segment-items.open { max-height: 350px; }
        .segment-item { display: flex; align-items: center; gap: 4px; padding: 4px 5px; border-radius: 2px; cursor: pointer; margin-top: 1px; font-size: 8px; }
        .segment-item:hover { background: rgba(255,255,255,0.05); }
        .segment-item.selected { background: rgba(227,30,36,0.15); }
        .tier-badge { min-width: 16px; height: 12px; display: flex; align-items: center; justify-content: center; border-radius: 2px; font-size: 7px; font-weight: bold; }
        .tier-super { background: #ffd700; color: #000; }
        .tier-t1 { background: #4caf50; color: #fff; }
        .tier-t2 { background: #2196f3; color: #fff; }
        .tier-t3 { background: #ff9800; color: #fff; }
        .tier-t4 { background: #f44336; color: #fff; }
        .center-panel { flex: 1; display: flex; flex-direction: column; padding: 8px; min-width: 0; }
        .canvas-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .canvas-title { font-size: 11px; font-weight: 600; }
        .view-toggle { display: flex; background: rgba(255,255,255,0.1); border-radius: 3px; padding: 2px; }
        .view-btn { padding: 3px 6px; border: none; background: transparent; color: #888; font-size: 8px; cursor: pointer; border-radius: 2px; }
        .view-btn.active { background: rgba(227,30,36,0.3); color: #fff; }
        .canvas-wrap { flex: 1; background: rgba(255,255,255,0.02); border-radius: 6px; border: 1px solid rgba(255,255,255,0.1); position: relative; }
        #quadrantCanvas { width: 100%; height: 100%; }
        .tooltip { position: fixed; background: rgba(0,0,0,0.95); padding: 8px 10px; border-radius: 5px; font-size: 9px; pointer-events: none; z-index: 1000; display: none; max-width: 220px; }
        .right-panel { width: 300px; background: rgba(255,255,255,0.02); border-left: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; overflow: hidden; }
        .right-panel-content { flex: 1; overflow-y: auto; }
        .detail-section { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .detail-title { font-size: 8px; font-weight: 600; color: #888; text-transform: uppercase; margin-bottom: 5px; }
        .detail-header { display: flex; align-items: center; gap: 6px; }
        .detail-name { font-size: 11px; font-weight: 600; }
        .detail-parent { font-size: 8px; color: #888; }
        .metrics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; }
        .metric-box { background: rgba(255,255,255,0.03); border-radius: 4px; padding: 5px 2px; text-align: center; }
        .metric-value { font-size: 13px; font-weight: 700; color: #e31e24; }
        .metric-label { font-size: 6px; color: #888; }
        .info-text { font-size: 9px; line-height: 1.4; color: #aaa; }
        .info-text.highlight { color: #4fc3f7; }
        .bht-category { margin-bottom: 6px; }
        .bht-category-title { font-size: 8px; font-weight: 600; margin-bottom: 3px; padding: 3px 5px; border-radius: 3px; }
        .bht-category-title.awareness { background: rgba(156,39,176,0.2); color: #ce93d8; }
        .bht-category-title.consideration { background: rgba(255,152,0,0.2); color: #ffb74d; }
        .bht-category-title.conversion { background: rgba(76,175,80,0.2); color: #81c784; }
        .bht-question { display: flex; align-items: flex-start; gap: 4px; padding: 3px 4px; border-radius: 2px; cursor: pointer; font-size: 8px; }
        .bht-question:hover { background: rgba(255,255,255,0.05); }
        .bht-question.selected { background: rgba(227,30,36,0.1); }
        .bht-question.recommended { border-left: 2px solid #e31e24; }
        .bht-checkbox { width: 11px; height: 11px; border: 1px solid rgba(255,255,255,0.3); border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 7px; flex-shrink: 0; }
        .bht-checkbox.checked { background: #e31e24; border-color: #e31e24; color: #fff; }
        .bht-tag { font-size: 6px; padding: 1px 4px; border-radius: 6px; background: rgba(227,30,36,0.2); color: #e31e24; margin-left: 3px; }
        .bht-tag.new { background: rgba(76,175,80,0.2); color: #81c784; }
        .distribution-bar-container { display: flex; height: 18px; border-radius: 4px; overflow: hidden; margin-bottom: 6px; }
        .distribution-bar { display: flex; align-items: center; justify-content: center; font-size: 8px; font-weight: 600; }
        .distribution-bar.awareness { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .distribution-bar.consideration { background: linear-gradient(135deg, #ff9800, #f57c00); }
        .distribution-bar.conversion { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .recommendation-box { padding: 6px; background: rgba(227,30,36,0.1); border-radius: 4px; border-left: 2px solid #e31e24; font-size: 8px; color: #aaa; }
        .platform-tabs { display: flex; gap: 3px; margin-bottom: 6px; }
        .platform-tab { padding: 4px 8px; border-radius: 4px; font-size: 8px; font-weight: 600; cursor: pointer; border: 1px solid transparent; }
        .platform-tab.meta { background: rgba(24,119,242,0.1); color: #4a90d9; }
        .platform-tab.meta.active { border-color: #1877f2; }
        .platform-tab.tiktok { background: rgba(0,0,0,0.3); color: #00f2ea; }
        .platform-tab.tiktok.active { border-color: #00f2ea; }
        .platform-tab.youtube { background: rgba(255,0,0,0.1); color: #ff4444; }
        .platform-tab.youtube.active { border-color: #ff0000; }
        .platform-tab.dv360 { background: rgba(52,168,83,0.1); color: #34a853; }
        .platform-tab.dv360.active { border-color: #34a853; }
        .platform-content { display: none; }
        .platform-content.active { display: block; }
        .targeting-table { width: 100%; font-size: 8px; }
        .targeting-table th { background: rgba(255,255,255,0.05); padding: 4px; text-align: left; font-size: 7px; color: #888; }
        .targeting-table td { padding: 4px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .bht-badge { padding: 1px 4px; border-radius: 6px; font-size: 6px; font-weight: 600; }
        .bht-badge.awareness { background: rgba(156,39,176,0.2); color: #ce93d8; }
        .bht-badge.consideration { background: rgba(255,152,0,0.2); color: #ffb74d; }
        .bht-badge.conversion { background: rgba(76,175,80,0.2); color: #81c784; }
        .kpi-tag { color: #4fc3f7; }
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #555; text-align: center; padding: 20px; }
        .empty-icon { font-size: 32px; margin-bottom: 8px; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="../../" class="nav-btn">‚Üê K√ºt√ºphane</a>
            <a href="../" class="nav-btn">üìä Quadrant</a>
            <div class="logo">
                <div class="logo-icon">PO</div>
                <div class="logo-text">Premium Market</div>
            </div>
        </div>
        <div style="display:flex;gap:5px;">
            <button class="btn btn-secondary" onclick="exportPNG()">üì• PNG</button>
            <button class="btn btn-secondary" onclick="exportExcel()">üìä Excel</button>
        </div>
    </header>
    <div class="main-container">
        <div class="left-panel">
            <div class="panel-header">
                <div class="panel-title">üìä 40 Segment</div>
                <div class="filter-row">
                    <button class="filter-btn active" data-tier="all" onclick="filterTier('all')">T√ºm√º</button>
                    <button class="filter-btn" data-tier="super" onclick="filterTier('super')">‚≠ê</button>
                    <button class="filter-btn" data-tier="t1" onclick="filterTier('t1')">T1</button>
                    <button class="filter-btn" data-tier="t2" onclick="filterTier('t2')">T2</button>
                    <button class="filter-btn" data-tier="t3" onclick="filterTier('t3')">T3</button>
                    <button class="filter-btn" data-tier="t4" onclick="filterTier('t4')">T4</button>
                </div>
            </div>
            <div class="segment-list" id="segmentList"></div>
        </div>
        <div class="center-panel">
            <div class="canvas-header">
                <div class="canvas-title">Segment Quadrant</div>
                <div class="view-toggle">
                    <button class="view-btn active" onclick="setView('all')">T√ºm√º</button>
                    <button class="view-btn" onclick="setView('Aile Seyahat Planlayƒ±cƒ±larƒ±')">Aile</button>
                    <button class="view-btn" onclick="setView('Deneyim Odaklƒ± ≈ûehirli Premiumlar')">Urban</button>
                    <button class="view-btn" onclick="setView('Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler')">Deƒüer</button>
                    <button class="view-btn" onclick="setView('Eri≈üilebilir Premium T√ºketiciler')">Premium</button>
                </div>
            </div>
            <div class="canvas-wrap"><canvas id="quadrantCanvas"></canvas></div>
        </div>
        <div class="right-panel">
            <div id="emptyState" class="empty-state">
                <div class="empty-icon">üëÜ</div>
                <div style="font-size:12px;color:#888;">Segment Se√ßin</div>
                <div style="font-size:9px;margin-top:4px;">Detaylarƒ± g√∂rmek i√ßin listeden veya grafikten segment se√ßin</div>
            </div>
            <div id="detailPanel" class="right-panel-content" style="display:none;">
                <div class="detail-section">
                    <div class="detail-header">
                        <div class="tier-badge" id="detailTier">T1</div>
                        <div><div class="detail-name" id="detailName">Segment</div><div class="detail-parent" id="detailParent">Parent</div></div>
                    </div>
                </div>
                <div class="detail-section">
                    <div class="detail-title">Metrikler</div>
                    <div class="metrics-grid">
                        <div class="metric-box"><div class="metric-value" id="metricX">50</div><div class="metric-label" id="metricXLabel">X</div></div>
                        <div class="metric-box"><div class="metric-value" id="metricY">50</div><div class="metric-label" id="metricYLabel">Y</div></div>
                        <div class="metric-box"><div class="metric-value" id="metricSize">50</div><div class="metric-label" id="metricSizeLabel">Boyut</div></div>
                        <div class="metric-box"><div class="metric-value" id="metricTier">T1</div><div class="metric-label">√ñncelik</div></div>
                    </div>
                </div>
                <div class="detail-section">
                    <div class="detail-title">Strateji</div>
                    <div class="info-text" id="detailReason" style="margin-bottom:4px;"></div>
                    <div class="info-text highlight" id="detailStrategy"></div>
                </div>
                <div class="detail-section">
                    <div class="detail-title">üéØ BHT Hedefleri</div>
                    <div class="bht-category"><div class="bht-category-title awareness">Awareness</div><div id="awarenessQ"></div></div>
                    <div class="bht-category"><div class="bht-category-title consideration">Consideration</div><div id="considerationQ"></div></div>
                    <div class="bht-category"><div class="bht-category-title conversion">Conversion</div><div id="conversionQ"></div></div>
                    <div style="margin-top:8px;">
                        <div class="detail-title">Funnel Daƒüƒ±lƒ±mƒ±</div>
                        <div class="distribution-bar-container" id="distBar"></div>
                        <div class="recommendation-box" id="recBox">Segment se√ßin</div>
                    </div>
                </div>
                <div class="detail-section">
                    <div class="detail-title">üéØ Platform Hedefleme</div>
                    <div class="platform-tabs">
                        <div class="platform-tab meta active" onclick="switchPlatform('meta')">Meta</div>
                        <div class="platform-tab tiktok" onclick="switchPlatform('tiktok')">TikTok</div>
                        <div class="platform-tab youtube" onclick="switchPlatform('youtube')">YouTube</div>
                        <div class="platform-tab dv360" onclick="switchPlatform('dv360')">DV360</div>
                    </div>
                    <div class="platform-content active" id="platform-meta"><table class="targeting-table"><thead><tr><th>Tip</th><th>Hedef</th><th>BHT</th><th>KPI</th></tr></thead><tbody id="metaT"></tbody></table></div>
                    <div class="platform-content" id="platform-tiktok"><table class="targeting-table"><thead><tr><th>Tip</th><th>Hedef</th><th>BHT</th><th>KPI</th></tr></thead><tbody id="tiktokT"></tbody></table></div>
                    <div class="platform-content" id="platform-youtube"><table class="targeting-table"><thead><tr><th>Tip</th><th>Hedef</th><th>BHT</th><th>KPI</th></tr></thead><tbody id="youtubeT"></tbody></table></div>
                    <div class="platform-content" id="platform-dv360"><table class="targeting-table"><thead><tr><th>Tip</th><th>Hedef</th><th>BHT</th><th>KPI</th></tr></thead><tbody id="dv360T"></tbody></table></div>
                </div>
            </div>
        </div>
    </div>
    <div class="tooltip" id="tooltip"></div>
    <script>
        const bhtQ={awareness:[{id:'aw1',text:'"Premium Market" konseptini duydum',isNew:true},{id:'aw2',text:'PO market hizmeti sunduƒüunu biliyorum',isNew:true},{id:'aw3',text:'Kaliteli atƒ±≈ütƒ±rmalƒ±k bulabileceƒüimi biliyorum',isNew:true},{id:'aw4',text:'G√ºvenilir bir marka',isNew:false},{id:'aw5',text:'Modern ve yenilik√ßi',isNew:false},{id:'aw6',text:'Lider marka',isNew:false}],consideration:[{id:'co1',text:'Yol √ºst√º atƒ±≈ütƒ±rmalƒ±k i√ßin PO tercih ederim',isNew:true},{id:'co2',text:'Premium √ºr√ºnler bulabileceƒüimi d√º≈ü√ºn√ºyorum',isNew:true},{id:'co3',text:'Hƒ±zlƒ± kahve i√ßin uƒürarƒ±m',isNew:true},{id:'co4',text:'Diƒüer istasyonlardan daha iyi',isNew:true},{id:'co5',text:'M√º≈üterisini anlar',isNew:false},{id:'co6',text:'ƒ∞stasyonlarƒ± aydƒ±nlƒ±k ve g√ºvenli',isNew:false},{id:'co7',text:'Teknolojik √ß√∂z√ºmler sunar',isNew:false},{id:'co8',text:'ƒ∞≈üimi hƒ±zlƒ± halledebilirim',isNew:false}],conversion:[{id:'cv1',text:'Son 1 ayda alƒ±≈üveri≈ü yaptƒ±m',isNew:true},{id:'cv2',text:'Sadece market i√ßin gittim',isNew:true},{id:'cv3',text:'Tavsiye ederim',isNew:true},{id:'cv4',text:'√úr√ºnler beklentimi kar≈üƒ±ladƒ±',isNew:true},{id:'cv5',text:'Yolumu deƒüi≈ütiririm',isNew:false},{id:'cv6',text:'Olmasa eksikliƒüini hissederim',isNew:false}]};
        const segBhtRec={'Aile Seyahat Planlayƒ±cƒ±larƒ±':['aw2','aw3','co1','co3','cv1'],'Deneyim Odaklƒ± ≈ûehirli Premiumlar':['aw1','aw5','co2','co4','cv4'],'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler':['aw3','co1','co8','cv1','cv2'],'Eri≈üilebilir Premium T√ºketiciler':['aw1','aw3','co2','co3','co4','cv1','cv3','cv4']};
        const targetT={'Aile Seyahat Planlayƒ±cƒ±larƒ±':{meta:[{type:'Interest',target:'Seyahat, Aile tatili',bht:'Awareness',kpi:'Reach'},{type:'Behavior',target:'Sƒ±k seyahat edenler',bht:'Consideration',kpi:'Engagement'},{type:'Demographic',target:'Ebeveynler 30-50',bht:'Consideration',kpi:'LP Views'},{type:'Custom',target:'PO app users',bht:'Conversion',kpi:'Store Visit'},{type:'Lookalike',target:'Yakƒ±t kartƒ± LAL 1-3%',bht:'Conversion',kpi:'Conv.'}],tiktok:[{type:'Interest',target:'Aile, Seyahat',bht:'Awareness',kpi:'Views'},{type:'Hashtag',target:'#aileiletatil',bht:'Awareness',kpi:'Reach'},{type:'Creator',target:'Aile influencerlarƒ±',bht:'Consideration',kpi:'Follows'},{type:'Retargeting',target:'Video 50%+',bht:'Conversion',kpi:'Clicks'}],youtube:[{type:'Affinity',target:'Aile odaklƒ±, Seyahat',bht:'Awareness',kpi:'CPV'},{type:'In-Market',target:'Aile tatili',bht:'Consideration',kpi:'VTR'},{type:'Custom Intent',target:'aile tatili rotasƒ±',bht:'Consideration',kpi:'Clicks'},{type:'Remarketing',target:'Video izleyiciler',bht:'Conversion',kpi:'Conv.'}],dv360:[{type:'Affinity',target:'Travel Buffs, Family',bht:'Awareness',kpi:'Reach'},{type:'In-Market',target:'Travel, Auto',bht:'Consideration',kpi:'Visits'},{type:'Custom Intent',target:'aile tatili',bht:'Consideration',kpi:'CTR'},{type:'Remarketing',target:'Site visitors',bht:'Conversion',kpi:'Conv.'}]},'Deneyim Odaklƒ± ≈ûehirli Premiumlar':{meta:[{type:'Interest',target:'Wellness, Fitness',bht:'Awareness',kpi:'Reach'},{type:'Behavior',target:'Health conscious',bht:'Consideration',kpi:'Engagement'},{type:'Demographic',target:'≈ûehirli 25-45',bht:'Consideration',kpi:'LP Views'},{type:'Custom',target:'Spor salonu √ºyeleri',bht:'Conversion',kpi:'Store Visit'},{type:'Lookalike',target:'Premium LAL 1-2%',bht:'Conversion',kpi:'ROAS'}],tiktok:[{type:'Interest',target:'Wellness, Lifestyle',bht:'Awareness',kpi:'Views'},{type:'Hashtag',target:'#wellness',bht:'Awareness',kpi:'Reach'},{type:'Creator',target:'Wellness creators',bht:'Consideration',kpi:'Follows'},{type:'Retargeting',target:'Engaged 7d',bht:'Conversion',kpi:'Conv.'}],youtube:[{type:'Affinity',target:'Health & Fitness',bht:'Awareness',kpi:'CPV'},{type:'In-Market',target:'Premium Food',bht:'Consideration',kpi:'VTR'},{type:'Custom Intent',target:'premium kahve',bht:'Consideration',kpi:'Clicks'},{type:'Remarketing',target:'High-value',bht:'Conversion',kpi:'ROAS'}],dv360:[{type:'Affinity',target:'Health, Foodies',bht:'Awareness',kpi:'Reach'},{type:'In-Market',target:'Health Food',bht:'Consideration',kpi:'CTR'},{type:'Custom Intent',target:'specialty coffee',bht:'Consideration',kpi:'Visits'},{type:'Remarketing',target:'High-value',bht:'Conversion',kpi:'ROAS'}]},'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler':{meta:[{type:'Interest',target:'Fƒ±rsatlar, ƒ∞ndirimler',bht:'Awareness',kpi:'Reach'},{type:'Behavior',target:'Deal seekers',bht:'Consideration',kpi:'CTR'},{type:'Custom',target:'Sadakat √ºyeleri',bht:'Conversion',kpi:'Redemption'},{type:'Retargeting',target:'Promo visitors',bht:'Conversion',kpi:'Conv.'}],tiktok:[{type:'Interest',target:'Deals, Tasarruf',bht:'Awareness',kpi:'Views'},{type:'Hashtag',target:'#indirim #fƒ±rsat',bht:'Awareness',kpi:'Reach'},{type:'Creator',target:'Fƒ±rsat avcƒ±larƒ±',bht:'Consideration',kpi:'Shares'},{type:'Retargeting',target:'Profile visitors',bht:'Conversion',kpi:'Downloads'}],youtube:[{type:'Affinity',target:'Bargain Hunters',bht:'Awareness',kpi:'CPV'},{type:'In-Market',target:'Coupons & Deals',bht:'Consideration',kpi:'VTR'},{type:'Custom Intent',target:'indirim kampanya',bht:'Consideration',kpi:'Clicks'},{type:'Remarketing',target:'Deal viewers',bht:'Conversion',kpi:'Conv.'}],dv360:[{type:'Affinity',target:'Bargain Hunters',bht:'Awareness',kpi:'Reach'},{type:'In-Market',target:'Deals',bht:'Consideration',kpi:'Clicks'},{type:'Custom Intent',target:'indirim',bht:'Consideration',kpi:'Visits'},{type:'Remarketing',target:'Cart abandoners',bht:'Conversion',kpi:'Conv.'}]},'Eri≈üilebilir Premium T√ºketiciler':{meta:[{type:'Interest',target:'Self-care, Premium, Kahve',bht:'Awareness',kpi:'Reach'},{type:'Behavior',target:'Impulse buyers',bht:'Consideration',kpi:'Engagement'},{type:'Demographic',target:'≈ûehirli 25-45',bht:'Consideration',kpi:'LP Views'},{type:'Custom',target:'Kahve m√ºdavimleri',bht:'Conversion',kpi:'Store Visit'},{type:'Lookalike',target:'Premium LAL 1-3%',bht:'Conversion',kpi:'Value'}],tiktok:[{type:'Interest',target:'Self-care, Kahve',bht:'Awareness',kpi:'Views'},{type:'Hashtag',target:'#kendini≈üƒ±mart',bht:'Awareness',kpi:'Reach'},{type:'Creator',target:'Lifestyle creators',bht:'Consideration',kpi:'Follows'},{type:'Retargeting',target:'High-intent',bht:'Conversion',kpi:'Conv.'}],youtube:[{type:'Affinity',target:'Coffee Lovers',bht:'Awareness',kpi:'CPV'},{type:'In-Market',target:'Coffee, Snacks',bht:'Consideration',kpi:'VTR'},{type:'Custom Intent',target:'premium kahve',bht:'Consideration',kpi:'Clicks'},{type:'Remarketing',target:'Converters',bht:'Conversion',kpi:'Repeat'}],dv360:[{type:'Affinity',target:'Coffee, Treats',bht:'Awareness',kpi:'Reach'},{type:'In-Market',target:'Premium Snacks',bht:'Consideration',kpi:'CTR'},{type:'Custom Intent',target:'grab go',bht:'Consideration',kpi:'Visits'},{type:'Remarketing',target:'High-value',bht:'Conversion',kpi:'ROAS'}]}};
        const segments=[{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Hafta Sonu Ka√ßamak√ßƒ±larƒ±',x:65,y:90,size:95,tier:'T1',reason:'Her hafta sonu yola √ßƒ±kƒ±yor.',strategy:'"Hafta Sonu Paketi" combo'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Aile Yol Gezisi Tutkunlarƒ±',x:55,y:70,size:90,tier:'T1',reason:'Uzun yol = √ßoklu durak.',strategy:'"Yol Arkada≈üƒ±" seti'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'G√ºvenlik √ñncelikli Maceracƒ±lar',x:75,y:65,size:75,tier:'T2',reason:'Premium √∂demeye hazƒ±r.',strategy:'Kalite vurgulu √ºr√ºnler'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Tema Parkƒ± Meraklƒ±larƒ±',x:45,y:60,size:70,tier:'T2',reason:'Sƒ±k seyahat eden aile.',strategy:'Aile paketi promolarƒ±'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Aile Kamp Planlayƒ±cƒ±larƒ±',x:40,y:55,size:65,tier:'T2',reason:'Pratik √ºr√ºn ihtiyacƒ±.',strategy:'"Kamp Essentials"'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Sezonluk Tatilciler',x:50,y:25,size:60,tier:'T3',reason:'Yƒ±lda 1-2 kez.',strategy:'Sezonsal kampanyalar'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'√áok Ku≈üaklƒ± Planlayƒ±cƒ±lar',x:60,y:35,size:55,tier:'T3',reason:'B√ºy√ºk aile = b√ºy√ºk basket.',strategy:'Aile boyu paketler'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Eƒüitici Gezi Arayanlar',x:55,y:30,size:45,tier:'T3',reason:'Ni≈ü kitle.',strategy:'K√ºlt√ºr rotalarƒ±'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'Seyahat Puanƒ± Optimizecileri',x:30,y:75,size:50,tier:'T4',reason:'Sadakat d√º≈ü√ºk.',strategy:'Puan √ßarpanƒ±'},{parent:'Aile Seyahat Planlayƒ±cƒ±larƒ±',name:'B√ºt√ße Dostu Aile Tatilcileri',x:20,y:45,size:55,tier:'T4',reason:'√áok fiyat hassas.',strategy:'Private label'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'≈ûehirli Wellness Arayanlar',x:85,y:70,size:90,tier:'T1',reason:'G√ºnl√ºk premium kahve.',strategy:'Protein bar, cold-pressed'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Premium Teknoloji √ñnc√ºleri',x:80,y:75,size:75,tier:'T1',reason:'Hƒ±z odaklƒ± grab & go.',strategy:'Specialty coffee, ≈üarj'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'L√ºks Macera Gezginleri',x:75,y:85,size:65,tier:'T2',reason:'Kaliteli √ºr√ºn arar.',strategy:'Trail mix, premium su'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Premium Seyahat Ustalarƒ±',x:70,y:90,size:55,tier:'T2',reason:'Y√ºksek kalite beklentisi.',strategy:'Gourmet, artisan'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'K√ºlt√ºrel Deneyim Koleksiyoncularƒ±',x:50,y:65,size:55,tier:'T2',reason:'K√ºlt√ºr turlarƒ±.',strategy:'Yerel lezzetler'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Fine Dining Tutkunlarƒ±',x:45,y:85,size:50,tier:'T3',reason:'Convenience deƒüil.',strategy:'Artisan snack'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'L√ºks Ya≈üam Tarzƒ± Meraklƒ±larƒ±',x:55,y:95,size:45,tier:'T3',reason:'√ñzel kanal tercihi.',strategy:'Premium imaj'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Butik Moda Takip√ßileri',x:40,y:70,size:40,tier:'T4',reason:'Market d√º≈ü√ºk √∂ncelik.',strategy:'D√º≈ü√ºk potansiyel'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Sanat & Tiyatro Hamileri',x:35,y:60,size:45,tier:'T4',reason:'Rutin alƒ±≈üveri≈ü az.',strategy:'D√º≈ü√ºk potansiyel'},{parent:'Deneyim Odaklƒ± ≈ûehirli Premiumlar',name:'Yat & Country Club √úyeleri',x:30,y:95,size:30,tier:'T4',reason:'Kapalƒ± ekosistem.',strategy:'Ula≈üƒ±lamaz'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Flash ƒ∞ndirim Tutkunlarƒ±',x:75,y:90,size:85,tier:'T1',reason:'Anlƒ±k fƒ±rsat = alƒ±r.',strategy:'G√ºnl√ºk flash deal'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Puan & √ñd√ºl Koleksiyoncularƒ±',x:55,y:85,size:80,tier:'T1',reason:'Program sadakati.',strategy:'Puan √ßarpanƒ±'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Fƒ±rsat Avcƒ±sƒ± Alƒ±≈üveri≈ü√ßiler',x:80,y:75,size:75,tier:'T2',reason:'Aktif fƒ±rsat arayƒ±≈üƒ±.',strategy:'Haftalƒ±k insert'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Sadece Temel ƒ∞htiya√ß Alƒ±cƒ±larƒ±',x:60,y:65,size:75,tier:'T2',reason:'D√ºzenli ihtiya√ß.',strategy:'Fiyat liderliƒüi'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'ƒ∞ndirim Maksimizecileri',x:85,y:70,size:70,tier:'T2',reason:'Promosyon takip√ßisi.',strategy:'√áoklu al kampanyalarƒ±'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Jenerik Marka Se√ßiciler',x:90,y:60,size:65,tier:'T3',reason:'Private label sadƒ±k.',strategy:'PO √∂zel marka'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'ƒ∞ndirim K√∂≈üesi Gezginleri',x:85,y:45,size:50,tier:'T3',reason:'ƒ∞ndirim k√∂≈üesi avcƒ±sƒ±.',strategy:'Endcap'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Toplu Alƒ±m Yapanlar',x:70,y:35,size:55,tier:'T4',reason:'Format uyumsuz.',strategy:'D√º≈ü√ºk √∂ncelik'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'Fiyat E≈üleme Talep Edenler',x:95,y:50,size:45,tier:'T4',reason:'Operasyonel y√ºk.',strategy:'Y√ºksek efor'},{parent:'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler',name:'ƒ∞kinci El Alƒ±≈üveri≈ü√ßiler',x:80,y:30,size:35,tier:'T4',reason:'Yeni √ºr√ºn d√º≈ü√ºk.',strategy:'Hedef dƒ±≈üƒ±'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Kolaylƒ±k Premium Arayanlar',x:90,y:80,size:95,tier:'S√ºper',reason:'Hƒ±z + kalite. Bi√ßilmi≈ü kaftan.',strategy:'"2 Dakika Garantisi"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Kendine √ñd√ºl Verenler',x:95,y:70,size:90,tier:'S√ºper',reason:'"Bunu hak ettim" anƒ±.',strategy:'"Bug√ºn Senin G√ºn√ºn"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'G√ºnl√ºk Premium Y√ºkseltmeciler',x:75,y:75,size:85,tier:'T1',reason:'Her g√ºn k√º√ß√ºk upgrade.',strategy:'"Upgrade Your Day"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Premium Kahve Tutkunlarƒ±',x:70,y:85,size:85,tier:'T1',reason:'Kahve = g√ºnl√ºk rit√ºel.',strategy:'"6. Kahve Bedava"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Son Dakika Premium √ñdeyiciler',x:85,y:75,size:80,tier:'T1',reason:'Acil ihtiya√ßta premium √∂der.',strategy:'"ƒ∞htiya√ß Anƒ±nda"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Talep √úzerine Ya≈üam Tarzƒ±',x:80,y:70,size:75,tier:'T2',reason:'Hƒ±z > fiyat.',strategy:'"Pre-Order & Pick"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Kalite Bilin√ßli D√ºrt√ºsel Alƒ±cƒ±lar',x:85,y:80,size:70,tier:'T2',reason:'Kalite filtreli impuls.',strategy:'"Haftanƒ±n Ke≈üfi"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Organik & Doƒüal Se√ßiciler',x:55,y:85,size:60,tier:'T2',reason:'Saƒülƒ±k bilin√ßli.',strategy:'"Clean Label Corner"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Artisan √úr√ºn Destek√ßileri',x:50,y:90,size:45,tier:'T3',reason:'√áok se√ßici.',strategy:'"Yerel Lezzet"'},{parent:'Eri≈üilebilir Premium T√ºketiciler',name:'Abonelik Servisi Benimseyenler',x:40,y:70,size:55,tier:'T4',reason:'Abonelik odaklƒ±.',strategy:'D√º≈ü√ºk potansiyel'}];
        const parentColors={'Aile Seyahat Planlayƒ±cƒ±larƒ±':{bg:'rgba(33,150,243,0.25)',border:'#2196f3'},'Deneyim Odaklƒ± ≈ûehirli Premiumlar':{bg:'rgba(156,39,176,0.25)',border:'#9c27b0'},'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler':{bg:'rgba(255,152,0,0.25)',border:'#ff9800'},'Eri≈üilebilir Premium T√ºketiciler':{bg:'rgba(76,175,80,0.25)',border:'#4caf50'}};
        const tierCfg={'S√ºper':{icon:'‚≠ê',class:'tier-super'},'T1':{icon:'T1',class:'tier-t1'},'T2':{icon:'T2',class:'tier-t2'},'T3':{icon:'T3',class:'tier-t3'},'T4':{icon:'T4',class:'tier-t4'}};
        const axisL={'Aile Seyahat Planlayƒ±cƒ±larƒ±':{x:'Premium A√ßƒ±klƒ±k',y:'Frekans',s:'Potansiyel'},'Deneyim Odaklƒ± ≈ûehirli Premiumlar':{x:'Convenience',y:'Premium Kapasite',s:'Pazar'},'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler':{x:'Fiyat Odaklƒ±lƒ±k',y:'Alƒ±≈üveri≈ü Frekansƒ±',s:'Hacim'},'Eri≈üilebilir Premium T√ºketiciler':{x:'D√ºrt√ºsellik',y:'Premium ƒ∞stek',s:'Deƒüer'}};
        let canvas,ctx,selectedSeg=null,currentFilter='all',currentView='all',selectedBht=new Set();
        const pad=45;
        function init(){canvas=document.getElementById('quadrantCanvas');ctx=canvas.getContext('2d');resizeCanvas();window.addEventListener('resize',resizeCanvas);canvas.addEventListener('mousemove',handleMouseMove);canvas.addEventListener('click',handleClick);canvas.addEventListener('mouseleave',()=>document.getElementById('tooltip').style.display='none');renderSegmentList();draw();}
        function resizeCanvas(){const c=canvas.parentElement;canvas.width=c.clientWidth;canvas.height=c.clientHeight;draw();}
        function renderSegmentList(){const groups={};segments.forEach((s,i)=>{if(!groups[s.parent])groups[s.parent]=[];groups[s.parent].push({...s,index:i});});const list=document.getElementById('segmentList');list.innerHTML='';Object.entries(groups).forEach(([parent,segs])=>{const colors=parentColors[parent];const div=document.createElement('div');div.className='segment-group';div.innerHTML=`<div class="segment-group-header" style="border-left-color:${colors.border};" onclick="toggleGroup(this)"><span>${parent.split(' ').slice(0,2).join(' ')}</span><span>‚ñº</span></div><div class="segment-items open">${segs.map(s=>`<div class="segment-item ${selectedSeg===s.index?'selected':''}" onclick="selectSegment(${s.index})"><div class="tier-badge ${tierCfg[s.tier].class}">${tierCfg[s.tier].icon}</div><span>${s.name}</span></div>`).join('')}</div>`;list.appendChild(div);});}
        function toggleGroup(h){const i=h.nextElementSibling;i.classList.toggle('open');h.querySelector('span:last-child').textContent=i.classList.contains('open')?'‚ñº':'‚ñ∂';}
        function getFiltered(){let f=segments;if(currentFilter!=='all'){const m={'super':'S√ºper','t1':'T1','t2':'T2','t3':'T3','t4':'T4'};f=f.filter(s=>s.tier===m[currentFilter]);}if(currentView!=='all')f=f.filter(s=>s.parent===currentView);return f;}
        function draw(){const w=canvas.width,h=canvas.height;ctx.fillStyle='#0f0f1a';ctx.fillRect(0,0,w,h);const cw=w-pad*2,ch=h-pad*2,cx=pad+cw/2,cy=pad+ch/2;ctx.fillStyle='rgba(255,152,0,0.04)';ctx.fillRect(pad,pad,cw/2,ch/2);ctx.fillStyle='rgba(76,175,80,0.06)';ctx.fillRect(cx,pad,cw/2,ch/2);ctx.fillStyle='rgba(244,67,54,0.04)';ctx.fillRect(pad,cy,cw/2,ch/2);ctx.fillStyle='rgba(33,150,243,0.04)';ctx.fillRect(cx,cy,cw/2,ch/2);ctx.strokeStyle='rgba(255,255,255,0.05)';ctx.lineWidth=1;for(let i=0;i<=10;i++){ctx.beginPath();ctx.moveTo(pad+(cw/10)*i,pad);ctx.lineTo(pad+(cw/10)*i,h-pad);ctx.stroke();ctx.beginPath();ctx.moveTo(pad,pad+(ch/10)*i);ctx.lineTo(w-pad,pad+(ch/10)*i);ctx.stroke();}ctx.strokeStyle='rgba(255,255,255,0.2)';ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(cx,pad);ctx.lineTo(cx,h-pad);ctx.stroke();ctx.beginPath();ctx.moveTo(pad,cy);ctx.lineTo(w-pad,cy);ctx.stroke();ctx.font='8px Segoe UI';ctx.fillStyle='rgba(255,255,255,0.4)';ctx.textAlign='center';ctx.fillText('YATIRIM',pad+cw/4,pad+12);ctx.fillText('üéØ √ñNCELƒ∞K',cx+cw/4,pad+12);const filtered=getFiltered();filtered.forEach(seg=>{const ri=segments.indexOf(seg),x=pad+(seg.x/100)*cw,y=pad+((100-seg.y)/100)*ch,size=(seg.size/100)*22+6,colors=parentColors[seg.parent];if(selectedSeg===ri){ctx.beginPath();ctx.arc(x,y,size+4,0,Math.PI*2);ctx.fillStyle='rgba(227,30,36,0.3)';ctx.fill();}ctx.beginPath();ctx.arc(x,y,size,0,Math.PI*2);ctx.fillStyle=colors.bg;ctx.fill();ctx.strokeStyle=colors.border;ctx.lineWidth=selectedSeg===ri?3:1.5;ctx.stroke();ctx.fillStyle=tierCfg[seg.tier].class==='tier-super'?'#ffd700':'#fff';ctx.font=`bold ${size>16?8:6}px Segoe UI`;ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(tierCfg[seg.tier].icon,x,y);});}
        function handleMouseMove(e){const rect=canvas.getBoundingClientRect(),mx=e.clientX-rect.left,my=e.clientY-rect.top,cw=canvas.width-pad*2,ch=canvas.height-pad*2;let found=null;getFiltered().forEach(seg=>{const x=pad+(seg.x/100)*cw,y=pad+((100-seg.y)/100)*ch,size=(seg.size/100)*22+6;if(Math.sqrt((mx-x)**2+(my-y)**2)<size)found=seg;});const tt=document.getElementById('tooltip');if(found){canvas.style.cursor='pointer';const l=axisL[found.parent];tt.innerHTML=`<div style="font-weight:600;">${found.name}</div><div style="color:#888;font-size:8px;margin:3px 0;">${found.parent}</div><div style="font-size:8px;">${l.x}: <b style="color:#e31e24;">${found.x}</b> | ${l.y}: <b style="color:#e31e24;">${found.y}</b> | Tier: <b>${found.tier}</b></div>`;tt.style.display='block';tt.style.left=(e.clientX+12)+'px';tt.style.top=(e.clientY+12)+'px';}else{canvas.style.cursor='default';tt.style.display='none';}}
        function handleClick(e){const rect=canvas.getBoundingClientRect(),mx=e.clientX-rect.left,my=e.clientY-rect.top,cw=canvas.width-pad*2,ch=canvas.height-pad*2;let found=null;getFiltered().forEach(seg=>{const ri=segments.indexOf(seg),x=pad+(seg.x/100)*cw,y=pad+((100-seg.y)/100)*ch,size=(seg.size/100)*22+6;if(Math.sqrt((mx-x)**2+(my-y)**2)<size)found=ri;});selectSegment(found);}
        function selectSegment(idx){selectedSeg=idx;renderSegmentList();draw();document.getElementById('emptyState').style.display=idx===null?'flex':'none';document.getElementById('detailPanel').style.display=idx===null?'none':'block';if(idx!==null){const seg=segments[idx],l=axisL[seg.parent],tier=tierCfg[seg.tier];document.getElementById('detailTier').className='tier-badge '+tier.class;document.getElementById('detailTier').textContent=tier.icon;document.getElementById('detailName').textContent=seg.name;document.getElementById('detailParent').textContent=seg.parent;document.getElementById('metricX').textContent=seg.x;document.getElementById('metricY').textContent=seg.y;document.getElementById('metricSize').textContent=seg.size;document.getElementById('metricTier').textContent=seg.tier;document.getElementById('metricXLabel').textContent=l.x;document.getElementById('metricYLabel').textContent=l.y;document.getElementById('metricSizeLabel').textContent=l.s;document.getElementById('detailReason').textContent=seg.reason;document.getElementById('detailStrategy').textContent=seg.strategy;renderBht(seg.parent);renderPlatform(seg.parent);}}
        function renderBht(parent){const recs=segBhtRec[parent]||[];selectedBht=new Set(recs);['awareness','consideration','conversion'].forEach(cat=>{document.getElementById(cat+'Q').innerHTML=bhtQ[cat].map(q=>{const isRec=recs.includes(q.id),isSel=selectedBht.has(q.id);return`<div class="bht-question ${isSel?'selected':''} ${isRec?'recommended':''}" onclick="toggleBht('${q.id}')"><div class="bht-checkbox ${isSel?'checked':''}">${isSel?'‚úì':''}</div><div style="flex:1;">${q.text}</div>${isRec?'<span class="bht-tag">√ñnerilen</span>':''}${q.isNew?'<span class="bht-tag new">Yeni</span>':''}</div>`;}).join('');});updateDist();}
        function toggleBht(id){if(selectedBht.has(id))selectedBht.delete(id);else selectedBht.add(id);if(selectedSeg!==null)renderBht(segments[selectedSeg].parent);}
        function updateDist(){let aw=0,co=0,cv=0;selectedBht.forEach(q=>{if(q.startsWith('aw'))aw++;else if(q.startsWith('co'))co++;else if(q.startsWith('cv'))cv++;});const total=aw+co+cv;if(total===0){document.getElementById('distBar').innerHTML='<div style="width:100%;text-align:center;color:#666;padding:4px;font-size:8px;">Soru se√ßin</div>';document.getElementById('recBox').textContent='BHT sorularƒ± se√ßin';return;}const awP=Math.round((aw/total)*100),coP=Math.round((co/total)*100),cvP=100-awP-coP;document.getElementById('distBar').innerHTML=(awP>0?`<div class="distribution-bar awareness" style="width:${awP}%">${awP}%</div>`:'')+(coP>0?`<div class="distribution-bar consideration" style="width:${coP}%">${coP}%</div>`:'')+(cvP>0?`<div class="distribution-bar conversion" style="width:${cvP}%">${cvP}%</div>`:'');let rec=awP>=50?'Awareness aƒüƒ±rlƒ±klƒ± ‚Üí Video/Reach':coP>=50?'Consideration aƒüƒ±rlƒ±klƒ± ‚Üí Engagement/Trafik':cvP>=50?'Conversion aƒüƒ±rlƒ±klƒ± ‚Üí Retargeting/Store Visit':'Dengeli ‚Üí Full-funnel';document.getElementById('recBox').textContent=rec;}
        function renderPlatform(parent){const t=targetT[parent]||targetT['Eri≈üilebilir Premium T√ºketiciler'];['meta','tiktok','youtube','dv360'].forEach(p=>{document.getElementById(p+'T').innerHTML=(t[p]||[]).map(r=>`<tr><td>${r.type}</td><td>${r.target}</td><td><span class="bht-badge ${r.bht.toLowerCase()}">${r.bht.substring(0,3)}</span></td><td class="kpi-tag">${r.kpi}</td></tr>`).join('');});}
        function switchPlatform(p){document.querySelectorAll('.platform-tab').forEach(t=>t.classList.toggle('active',t.classList.contains(p)));document.querySelectorAll('.platform-content').forEach(c=>c.classList.toggle('active',c.id==='platform-'+p));}
        function filterTier(t){currentFilter=t;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.dataset.tier===t));draw();}
        function setView(v){currentView=v;document.querySelectorAll('.view-btn').forEach(b=>{const isA=(v==='all'&&b.textContent==='T√ºm√º')||(v==='Aile Seyahat Planlayƒ±cƒ±larƒ±'&&b.textContent==='Aile')||(v==='Deneyim Odaklƒ± ≈ûehirli Premiumlar'&&b.textContent==='Urban')||(v==='Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler'&&b.textContent==='Deƒüer')||(v==='Eri≈üilebilir Premium T√ºketiciler'&&b.textContent==='Premium');b.classList.toggle('active',isA);});draw();}
        function exportPNG(){const l=document.createElement('a');l.download='po-quadrant.png';l.href=canvas.toDataURL('image/png');l.click();}
        function exportExcel(){let h='<html><head><meta charset="UTF-8"></head><body><table border="1"><tr><th>Ana</th><th>Alt</th><th>X</th><th>Y</th><th>Size</th><th>Tier</th><th>Gerek√ße</th><th>Strateji</th></tr>';segments.forEach(s=>{h+=`<tr><td>${s.parent}</td><td>${s.name}</td><td>${s.x}</td><td>${s.y}</td><td>${s.size}</td><td>${s.tier}</td><td>${s.reason}</td><td>${s.strategy}</td></tr>`;});h+='</table></body></html>';const b=new Blob([h],{type:'application/vnd.ms-excel'}),l=document.createElement('a');l.href=URL.createObjectURL(b);l.download='po-segments.xls';l.click();}
        window.onload=init;
    </script>
</body>
</html>
