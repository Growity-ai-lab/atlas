<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petrol Ofisi Premium Market - Segment Analizi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; color: #fff; }
        
        /* Header */
        .header { background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(255,255,255,0.1); padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; }
        .header-left { display: flex; align-items: center; gap: 16px; }
        .back-btn { padding: 8px 16px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: transparent; color: #fff; font-size: 12px; cursor: pointer; text-decoration: none; display: flex; align-items: center; gap: 6px; }
        .back-btn:hover { background: rgba(255,255,255,0.1); }
        .logo { display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, #e31e24, #c41e24); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; }
        .logo-text { font-size: 16px; font-weight: 700; }
        .logo-sub { font-size: 11px; color: #888; }
        .header-actions { display: flex; gap: 8px; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; font-size: 11px; font-weight: 600; cursor: pointer; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }
        .btn-primary { background: linear-gradient(135deg, #e31e24, #c41e24); color: #fff; }
        
        /* Main Layout */
        .main-container { display: flex; height: calc(100vh - 56px); }
        
        /* Left Panel */
        .left-panel { width: 280px; background: rgba(255,255,255,0.02); border-right: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; }
        .panel-header { padding: 14px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .panel-title { font-size: 13px; font-weight: 600; margin-bottom: 4px; }
        .panel-subtitle { font-size: 11px; color: #888; }
        
        /* Filters */
        .filter-section { padding: 10px 14px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .filter-title { font-size: 10px; color: #888; margin-bottom: 8px; text-transform: uppercase; }
        .filter-row { display: flex; gap: 4px; flex-wrap: wrap; }
        .filter-btn { padding: 5px 10px; border: 1px solid rgba(255,255,255,0.15); border-radius: 5px; background: transparent; color: #aaa; font-size: 10px; cursor: pointer; }
        .filter-btn:hover { background: rgba(255,255,255,0.05); }
        .filter-btn.active { background: rgba(227,30,36,0.2); border-color: #e31e24; color: #e31e24; }
        
        /* Segment List */
        .segment-list { flex: 1; overflow-y: auto; padding: 8px; }
        .segment-group { margin-bottom: 8px; }
        .segment-group-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 10px; background: rgba(255,255,255,0.05); border-radius: 6px; cursor: pointer; font-size: 11px; font-weight: 600; border-left: 3px solid #666; }
        .segment-group-header:hover { background: rgba(255,255,255,0.08); }
        .segment-items { max-height: 0; overflow: hidden; transition: max-height 0.3s; }
        .segment-items.open { max-height: 500px; }
        .segment-item { display: flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 5px; cursor: pointer; margin-top: 2px; }
        .segment-item:hover { background: rgba(255,255,255,0.05); }
        .segment-item.selected { background: rgba(227,30,36,0.15); border: 1px solid rgba(227,30,36,0.3); }
        .tier-badge { min-width: 24px; height: 18px; display: flex; align-items: center; justify-content: center; border-radius: 4px; font-size: 9px; font-weight: bold; }
        .tier-super { background: #ffd700; color: #000; }
        .tier-t1 { background: #4caf50; color: #fff; }
        .tier-t2 { background: #2196f3; color: #fff; }
        .tier-t3 { background: #ff9800; color: #fff; }
        .tier-t4 { background: #f44336; color: #fff; }
        .segment-name { font-size: 10px; flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        /* Summary Stats */
        .summary-stats { padding: 12px; background: rgba(255,255,255,0.02); border-top: 1px solid rgba(255,255,255,0.1); }
        .stats-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
        .stat-box { text-align: center; padding: 8px 4px; background: rgba(255,255,255,0.03); border-radius: 6px; }
        .stat-value { font-size: 16px; font-weight: 700; }
        .stat-label { font-size: 8px; color: #888; margin-top: 2px; }
        
        /* Center Panel */
        .center-panel { flex: 1; display: flex; flex-direction: column; }
        
        /* Tabs */
        .tabs { display: flex; background: rgba(255,255,255,0.02); border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tab { padding: 12px 20px; font-size: 12px; font-weight: 500; color: #888; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab:hover { color: #fff; background: rgba(255,255,255,0.03); }
        .tab.active { color: #e31e24; border-bottom-color: #e31e24; }
        
        /* Tab Content */
        .tab-content { flex: 1; display: none; overflow: hidden; }
        .tab-content.active { display: flex; flex-direction: column; }
        
        /* Quadrant Tab */
        .quadrant-wrapper { flex: 1; display: flex; }
        .canvas-container { flex: 1; padding: 16px; display: flex; flex-direction: column; }
        .canvas-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .canvas-title { font-size: 14px; font-weight: 600; }
        .view-toggle { display: flex; background: rgba(255,255,255,0.1); border-radius: 5px; padding: 2px; gap: 2px; }
        .view-btn { padding: 6px 12px; border: none; background: transparent; color: #888; font-size: 10px; cursor: pointer; border-radius: 4px; }
        .view-btn.active { background: rgba(227,30,36,0.3); color: #fff; }
        .canvas-wrap { flex: 1; background: rgba(255,255,255,0.02); border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); position: relative; min-height: 400px; }
        #quadrantCanvas { width: 100%; height: 100%; }
        
        /* Right Detail Panel */
        .detail-panel { width: 300px; background: rgba(255,255,255,0.02); border-left: 1px solid rgba(255,255,255,0.1); overflow-y: auto; }
        .detail-section { padding: 14px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .detail-title { font-size: 10px; font-weight: 600; color: #888; text-transform: uppercase; margin-bottom: 10px; }
        .detail-header { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
        .detail-name { font-size: 14px; font-weight: 600; }
        .detail-parent { font-size: 11px; color: #888; }
        .metrics-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .metric-box { background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; text-align: center; }
        .metric-value { font-size: 18px; font-weight: 700; color: #e31e24; }
        .metric-label { font-size: 9px; color: #888; margin-top: 4px; }
        .info-text { font-size: 11px; line-height: 1.5; color: #aaa; }
        .info-text.highlight { color: #4fc3f7; }
        
        /* BHT Section */
        .bht-targets { display: flex; flex-direction: column; gap: 6px; }
        .bht-item { display: flex; align-items: center; gap: 8px; padding: 6px 8px; background: rgba(255,255,255,0.03); border-radius: 5px; font-size: 10px; }
        .bht-badge { padding: 2px 6px; border-radius: 10px; font-size: 8px; font-weight: 600; }
        .bht-badge.awareness { background: rgba(156,39,176,0.2); color: #ce93d8; }
        .bht-badge.consideration { background: rgba(255,152,0,0.2); color: #ffb74d; }
        .bht-badge.conversion { background: rgba(76,175,80,0.2); color: #81c784; }
        
        /* Bottom Panel */
        .bottom-panel { background: rgba(255,255,255,0.02); border-top: 1px solid rgba(255,255,255,0.1); max-height: 0; overflow: hidden; transition: max-height 0.3s; }
        .bottom-panel.active { max-height: 45vh; overflow-y: auto; }
        .bottom-content { padding: 16px 20px; }
        .bottom-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .bottom-title { font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .bottom-subtitle { font-size: 11px; color: #888; }
        
        /* BHT Questions Panel */
        .bht-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
        .bht-questions-panel, .bht-distribution-panel { background: rgba(255,255,255,0.02); border-radius: 10px; padding: 14px; }
        .bht-category { margin-bottom: 12px; }
        .bht-category-title { font-size: 11px; font-weight: 600; margin-bottom: 8px; padding: 6px 10px; border-radius: 6px; display: flex; align-items: center; gap: 6px; }
        .bht-category-title.awareness { background: rgba(156,39,176,0.2); color: #ce93d8; }
        .bht-category-title.consideration { background: rgba(255,152,0,0.2); color: #ffb74d; }
        .bht-category-title.conversion { background: rgba(76,175,80,0.2); color: #81c784; }
        .bht-question { display: flex; align-items: flex-start; gap: 8px; padding: 6px 8px; border-radius: 5px; cursor: pointer; }
        .bht-question:hover { background: rgba(255,255,255,0.05); }
        .bht-question.selected { background: rgba(227,30,36,0.1); }
        .bht-question.recommended { border-left: 2px solid #e31e24; }
        .bht-checkbox { width: 16px; height: 16px; border: 2px solid rgba(255,255,255,0.3); border-radius: 3px; display: flex; align-items: center; justify-content: center; font-size: 10px; flex-shrink: 0; }
        .bht-checkbox.checked { background: #e31e24; border-color: #e31e24; color: #fff; }
        .bht-question-text { font-size: 10px; line-height: 1.4; flex: 1; }
        .bht-tag { font-size: 8px; padding: 2px 6px; border-radius: 10px; background: rgba(227,30,36,0.2); color: #e31e24; }
        .bht-tag.new { background: rgba(76,175,80,0.2); color: #81c784; }
        
        /* Distribution */
        .distribution-bar-container { display: flex; height: 32px; border-radius: 6px; overflow: hidden; margin-bottom: 12px; }
        .distribution-bar { display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 600; }
        .distribution-bar.awareness { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .distribution-bar.consideration { background: linear-gradient(135deg, #ff9800, #f57c00); }
        .distribution-bar.conversion { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .funnel-stage { display: flex; align-items: center; margin-bottom: 8px; }
        .funnel-label { width: 100px; font-size: 10px; font-weight: 600; }
        .funnel-bar-bg { flex: 1; height: 20px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
        .funnel-bar-fill { height: 100%; display: flex; align-items: center; justify-content: flex-end; padding-right: 8px; font-size: 9px; font-weight: 600; }
        .funnel-bar-fill.awareness { background: linear-gradient(90deg, #9c27b0, #ba68c8); }
        .funnel-bar-fill.consideration { background: linear-gradient(90deg, #ff9800, #ffb74d); }
        .funnel-bar-fill.conversion { background: linear-gradient(90deg, #4caf50, #81c784); }
        .recommendation-box { padding: 12px; background: rgba(227,30,36,0.1); border-radius: 8px; border-left: 3px solid #e31e24; margin-top: 16px; }
        .recommendation-title { font-size: 10px; font-weight: 600; color: #e31e24; margin-bottom: 6px; }
        .recommendation-text { font-size: 10px; line-height: 1.5; color: #aaa; }
        
        /* Platform Tables */
        .platform-tables { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .platform-table { background: rgba(255,255,255,0.02); border-radius: 8px; overflow: hidden; }
        .platform-header { display: flex; align-items: center; gap: 8px; padding: 10px 12px; font-size: 11px; font-weight: 600; }
        .platform-header.meta { background: rgba(24,119,242,0.2); border-bottom: 2px solid #1877f2; }
        .platform-header.tiktok { background: rgba(0,242,234,0.1); border-bottom: 2px solid #00f2ea; }
        .platform-header.dv360 { background: rgba(52,168,83,0.2); border-bottom: 2px solid #34a853; }
        .platform-icon { width: 20px; height: 20px; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; }
        .platform-icon.meta { background: #1877f2; }
        .platform-icon.tiktok { background: #000; color: #00f2ea; }
        .platform-icon.dv360 { background: #34a853; }
        .targeting-table { width: 100%; border-collapse: collapse; font-size: 9px; }
        .targeting-table th { background: rgba(255,255,255,0.05); padding: 6px 8px; text-align: left; font-weight: 600; color: #888; font-size: 8px; }
        .targeting-table td { padding: 6px 8px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .targeting-table tr:hover { background: rgba(255,255,255,0.03); }
        .kpi-tag { color: #4fc3f7; font-size: 8px; }
        
        /* Tooltip */
        .tooltip { position: fixed; background: rgba(0,0,0,0.95); padding: 12px 16px; border-radius: 10px; font-size: 11px; pointer-events: none; z-index: 1000; display: none; max-width: 280px; border: 1px solid rgba(255,255,255,0.1); }
        
        /* Empty State */
        .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #555; text-align: center; padding: 40px; }
        .empty-icon { font-size: 48px; margin-bottom: 12px; }
        .empty-title { font-size: 16px; color: #888; margin-bottom: 6px; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="../" class="back-btn">‚Üê Segment K√ºt√ºphanesi</a>
            <div class="logo">
                <div class="logo-icon">PO</div>
                <div>
                    <div class="logo-text">Premium Market</div>
                    <div class="logo-sub">Segment Analizi</div>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="exportPNG()">üì• PNG</button>
            <button class="btn btn-secondary" onclick="exportExcel()">üìä Excel</button>
        </div>
    </header>

    <div class="main-container">
        <!-- Left Panel -->
        <div class="left-panel">
            <div class="panel-header">
                <div class="panel-title">üìä Segment Listesi</div>
                <div class="panel-subtitle">40 Alt Segment | 4 Ana Kategori</div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">Tier Filtresi</div>
                <div class="filter-row">
                    <button class="filter-btn active" data-tier="all" onclick="filterTier('all')">T√ºm√º</button>
                    <button class="filter-btn" data-tier="super" onclick="filterTier('super')">‚≠ê</button>
                    <button class="filter-btn" data-tier="t1" onclick="filterTier('t1')">T1</button>
                    <button class="filter-btn" data-tier="t2" onclick="filterTier('t2')">T2</button>
                    <button class="filter-btn" data-tier="t3" onclick="filterTier('t3')">T3</button>
                    <button class="filter-btn" data-tier="t4" onclick="filterTier('t4')">T4</button>
                </div>
            </div>
            
            <div class="segment-list" id="segmentList"></div>
            
            <div class="summary-stats">
                <div class="stats-grid">
                    <div class="stat-box"><div class="stat-value" style="color:#ffd700;">2</div><div class="stat-label">S√ºper</div></div>
                    <div class="stat-box"><div class="stat-value" style="color:#4caf50;">11</div><div class="stat-label">T1</div></div>
                    <div class="stat-box"><div class="stat-value" style="color:#2196f3;">12</div><div class="stat-label">T2</div></div>
                    <div class="stat-box"><div class="stat-value" style="color:#ff9800;">7</div><div class="stat-label">T3</div></div>
                    <div class="stat-box"><div class="stat-value" style="color:#f44336;">8</div><div class="stat-label">T4</div></div>
                </div>
            </div>
        </div>

        <!-- Center Panel -->
        <div class="center-panel">
            <div class="tabs">
                <div class="tab active" data-tab="quadrant" onclick="switchTab('quadrant')">üìä Quadrant</div>
                <div class="tab" data-tab="targeting" onclick="switchTab('targeting')">üéØ Platform Hedefleme</div>
            </div>

            <!-- Quadrant Tab -->
            <div class="tab-content active" id="tab-quadrant">
                <div class="quadrant-wrapper">
                    <div class="canvas-container">
                        <div class="canvas-header">
                            <div class="canvas-title">Segment Quadrant Analizi</div>
                            <div class="view-toggle">
                                <button class="view-btn active" onclick="setView('all')">T√ºm√º</button>
                                <button class="view-btn" onclick="setView('Aile Seyahat Planlayƒ±cƒ±larƒ±')">Aile</button>
                                <button class="view-btn" onclick="setView('Deneyim Odaklƒ± ≈ûehirli Premiumlar')">Urban</button>
                                <button class="view-btn" onclick="setView('Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler')">Deƒüer</button>
                                <button class="view-btn" onclick="setView('Eri≈üilebilir Premium T√ºketiciler')">Premium</button>
                            </div>
                        </div>
                        <div class="canvas-wrap">
                            <canvas id="quadrantCanvas"></canvas>
                        </div>
                    </div>
                    
                    <!-- Right Detail Panel -->
                    <div class="detail-panel" id="detailPanel">
                        <div id="defaultDetail">
                            <div class="detail-section">
                                <p style="color:#888;font-size:11px;text-align:center;padding:20px 0;">Detay g√∂rmek i√ßin bir segmente tƒ±klayƒ±n</p>
                            </div>
                        </div>
                        <div id="selectedDetail" style="display:none;">
                            <div class="detail-section">
                                <div class="detail-header">
                                    <div class="tier-badge" id="detailTier">T1</div>
                                    <div>
                                        <div class="detail-name" id="detailName">Segment Adƒ±</div>
                                        <div class="detail-parent" id="detailParent">Ana Segment</div>
                                    </div>
                                </div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">Metrikler</div>
                                <div class="metrics-grid">
                                    <div class="metric-box"><div class="metric-value" id="metricX">50</div><div class="metric-label" id="metricXLabel">X</div></div>
                                    <div class="metric-box"><div class="metric-value" id="metricY">50</div><div class="metric-label" id="metricYLabel">Y</div></div>
                                    <div class="metric-box"><div class="metric-value" id="metricSize">50</div><div class="metric-label" id="metricSizeLabel">Boyut</div></div>
                                    <div class="metric-box"><div class="metric-value" id="metricTier">T1</div><div class="metric-label">√ñncelik</div></div>
                                </div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">Gerek√ße</div>
                                <div class="info-text" id="detailReason">-</div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">Strateji</div>
                                <div class="info-text highlight" id="detailStrategy">-</div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">√ñncelikli BHT Hedefleri</div>
                                <div class="bht-targets" id="detailBht"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Panel -->
                <div class="bottom-panel" id="bottomPanel">
                    <div class="bottom-content">
                        <div class="bottom-header">
                            <div class="bottom-title">
                                <span id="bottomSegmentName">Segment</span>
                                <span class="bottom-subtitle" id="bottomSegmentParent"></span>
                            </div>
                        </div>
                        
                        <div class="bht-grid">
                            <div class="bht-questions-panel">
                                <div class="detail-title">BHT Soru Se√ßimi</div>
                                <div class="bht-category">
                                    <div class="bht-category-title awareness">üéØ Awareness (Farkƒ±ndalƒ±k)</div>
                                    <div id="awarenessQuestions"></div>
                                </div>
                                <div class="bht-category">
                                    <div class="bht-category-title consideration">üí≠ Consideration (Deƒüerlendirme)</div>
                                    <div id="considerationQuestions"></div>
                                </div>
                                <div class="bht-category">
                                    <div class="bht-category-title conversion">‚úÖ Conversion (D√∂n√º≈ü√ºm)</div>
                                    <div id="conversionQuestions"></div>
                                </div>
                            </div>
                            
                            <div class="bht-distribution-panel">
                                <div class="detail-title">Funnel Daƒüƒ±lƒ±mƒ±</div>
                                <div class="distribution-bar-container" id="distributionBar"></div>
                                <div class="funnel-stage">
                                    <div class="funnel-label" style="color:#ce93d8;">Awareness</div>
                                    <div class="funnel-bar-bg"><div class="funnel-bar-fill awareness" id="funnelAwareness"></div></div>
                                </div>
                                <div class="funnel-stage">
                                    <div class="funnel-label" style="color:#ffb74d;">Consideration</div>
                                    <div class="funnel-bar-bg"><div class="funnel-bar-fill consideration" id="funnelConsideration"></div></div>
                                </div>
                                <div class="funnel-stage">
                                    <div class="funnel-label" style="color:#81c784;">Conversion</div>
                                    <div class="funnel-bar-bg"><div class="funnel-bar-fill conversion" id="funnelConversion"></div></div>
                                </div>
                                <div class="recommendation-box">
                                    <div class="recommendation-title">üí° √ñneri</div>
                                    <div class="recommendation-text" id="recommendationText"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-title" style="margin-bottom:12px;">üéØ Platform Hedefleme Detaylarƒ±</div>
                        <div class="platform-tables">
                            <div class="platform-table">
                                <div class="platform-header meta"><div class="platform-icon meta">f</div>Meta</div>
                                <table class="targeting-table">
                                    <thead><tr><th>Tip</th><th>Hedefleme</th><th>BHT</th><th>KPI</th></tr></thead>
                                    <tbody id="metaTableBody"></tbody>
                                </table>
                            </div>
                            <div class="platform-table">
                                <div class="platform-header tiktok"><div class="platform-icon tiktok">‚ô™</div>TikTok</div>
                                <table class="targeting-table">
                                    <thead><tr><th>Tip</th><th>Hedefleme</th><th>BHT</th><th>KPI</th></tr></thead>
                                    <tbody id="tiktokTableBody"></tbody>
                                </table>
                            </div>
                            <div class="platform-table">
                                <div class="platform-header dv360"><div class="platform-icon dv360">G</div>DV360</div>
                                <table class="targeting-table">
                                    <thead><tr><th>Tip</th><th>Hedefleme</th><th>BHT</th><th>KPI</th></tr></thead>
                                    <tbody id="dv360TableBody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Targeting Tab -->
            <div class="tab-content" id="tab-targeting">
                <div style="padding:20px;">
                    <p style="color:#888;">Segment se√ßerek platform hedefleme detaylarƒ±nƒ± g√∂r√ºnt√ºleyin.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // BHT Sorularƒ±
        const bhtQuestions = {
            awareness: [
                { id: 'aw1', text: '"Premium Market" konseptini/markasƒ±nƒ± duydum', isNew: true },
                { id: 'aw2', text: 'Petrol Ofisi\'nin market/maƒüaza hizmeti sunduƒüunu biliyorum', isNew: true },
                { id: 'aw3', text: 'ƒ∞stasyonlarƒ±nda kaliteli atƒ±≈ütƒ±rmalƒ±k/yiyecek bulabileceƒüimi biliyorum', isNew: true },
                { id: 'aw4', text: 'G√ºvenilir bir markadƒ±r', isNew: false },
                { id: 'aw5', text: 'Modern ve yeniliklerin √∂nc√ºs√º bir markadƒ±r', isNew: false },
                { id: 'aw6', text: 'Lider bir markadƒ±r', isNew: false },
            ],
            consideration: [
                { id: 'co1', text: 'Yol √ºst√ºnde atƒ±≈ütƒ±rmalƒ±k/i√ßecek almak i√ßin Petrol Ofisi\'ni tercih ederim', isNew: true },
                { id: 'co2', text: 'Premium/kaliteli √ºr√ºnler bulabileceƒüimi d√º≈ü√ºn√ºyorum', isNew: true },
                { id: 'co3', text: 'Hƒ±zlƒ± kahve/atƒ±≈ütƒ±rmalƒ±k i√ßin uƒüramayƒ± d√º≈ü√ºn√ºr√ºm', isNew: true },
                { id: 'co4', text: 'Diƒüer akaryakƒ±t istasyonu marketlerinden daha iyidir', isNew: true },
                { id: 'co5', text: 'M√º≈üterisini anlar, onlara √∂zel √ºr√ºn ve hizmetler sunar', isNew: false },
                { id: 'co6', text: 'ƒ∞stasyonlarƒ± aydƒ±nlƒ±k, ferah ve g√ºvenlidir', isNew: false },
                { id: 'co7', text: 'Hayatƒ±mƒ± kolayla≈ütƒ±ran teknolojik √ß√∂z√ºmler sunar', isNew: false },
                { id: 'co8', text: 'ƒ∞≈üimi yorulmadan hƒ±zlƒ± halledebildiƒüim istasyonlara sahiptir', isNew: false },
            ],
            conversion: [
                { id: 'cv1', text: 'Son 1 ayda Petrol Ofisi marketinden alƒ±≈üveri≈ü yaptƒ±m', isNew: true },
                { id: 'cv2', text: 'Yakƒ±t almadan sadece market alƒ±≈üveri≈üi i√ßin gittim', isNew: true },
                { id: 'cv3', text: 'Marketini arkada≈ülarƒ±ma/aileme tavsiye ederim', isNew: true },
                { id: 'cv4', text: 'Aldƒ±ƒüƒ±m √ºr√ºnler beklentimi kar≈üƒ±ladƒ±', isNew: true },
                { id: 'cv5', text: 'Bu markadan yakƒ±t almak i√ßin yolumu deƒüi≈ütiririm', isNew: false },
                { id: 'cv6', text: 'Piyasada olmasa eksikliƒüini hissedeceƒüim bir markadƒ±r', isNew: false },
            ]
        };

        // Segment bazlƒ± √∂nerilen BHT sorularƒ±
        const segmentBhtRecommendations = {
            'Aile Seyahat Planlayƒ±cƒ±larƒ±': ['aw2', 'aw3', 'co1', 'co3', 'cv1'],
            'Deneyim Odaklƒ± ≈ûehirli Premiumlar': ['aw1', 'aw5', 'co2', 'co4', 'cv4'],
            'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler': ['aw3', 'co1', 'co8', 'cv1', 'cv2'],
            'Eri≈üilebilir Premium T√ºketiciler': ['aw1', 'aw3', 'co2', 'co3', 'co4', 'cv1', 'cv3', 'cv4']
        };

        // Hedefleme ≈üablonlarƒ±
        const targetingTemplates = {
            'Aile Seyahat Planlayƒ±cƒ±larƒ±': {
                meta: [
                    { type: 'Interest', target: 'Seyahat, Aile tatilleri, Yol gezisi', bht: 'Awareness', kpi: 'Reach, Video Views' },
                    { type: 'Interest', target: 'Kamp, Outdoor aktiviteler', bht: 'Awareness', kpi: 'Impressions' },
                    { type: 'Behavior', target: 'Sƒ±k seyahat edenler, Ara√ß sahipleri', bht: 'Consideration', kpi: 'Engagement, CTR' },
                    { type: 'Demographic', target: 'Ebeveynler 30-50, Orta-√úst gelir', bht: 'Consideration', kpi: 'LP Views' },
                    { type: 'Custom Audience', target: 'PO uygulama kullanƒ±cƒ±larƒ±', bht: 'Conversion', kpi: 'Store Visits' },
                    { type: 'Lookalike', target: 'Yakƒ±t kartƒ± sahipleri LAL 1-3%', bht: 'Conversion', kpi: 'Conv. Rate' }
                ],
                tiktok: [
                    { type: 'Interest', target: 'Aile ya≈üamƒ±, Seyahat vloglarƒ±', bht: 'Awareness', kpi: 'Video Views' },
                    { type: 'Behavior', target: 'Aile i√ßerik izleyicileri', bht: 'Consideration', kpi: 'Engagement' },
                    { type: 'Hashtag', target: '#aileiletatil #yolculuk', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'Creator', target: 'Aile seyahat influencerlarƒ±', bht: 'Consideration', kpi: 'Follows' },
                    { type: 'Retargeting', target: 'Video izleyicileri 50%+', bht: 'Conversion', kpi: 'Clicks' }
                ],
                dv360: [
                    { type: 'Affinity', target: 'Seyahat Tutkunlarƒ±, Aile Odaklƒ±', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'In-Market', target: 'Seyahat, Otomotiv/Yakƒ±t', bht: 'Consideration', kpi: 'Site Visits' },
                    { type: 'Custom Intent', target: 'aile tatili, yol gezisi', bht: 'Consideration', kpi: 'Search Lift' },
                    { type: 'Remarketing', target: 'Site ziyaret√ßileri, Uygulama', bht: 'Conversion', kpi: 'Conversions' }
                ]
            },
            'Deneyim Odaklƒ± ≈ûehirli Premiumlar': {
                meta: [
                    { type: 'Interest', target: 'Wellness, Fitness, Organik gƒ±da', bht: 'Awareness', kpi: 'Reach, Video Views' },
                    { type: 'Interest', target: 'Premium markalar, Tech gadgetlar', bht: 'Awareness', kpi: 'Impressions' },
                    { type: 'Behavior', target: 'Saƒülƒ±k bilin√ßli, Early adopters', bht: 'Consideration', kpi: 'Engagement' },
                    { type: 'Demographic', target: '≈ûehirli profesyoneller 25-45', bht: 'Consideration', kpi: 'LP Views' },
                    { type: 'Custom Audience', target: 'Spor salonu √ºyeleri', bht: 'Conversion', kpi: 'Store Visits' },
                    { type: 'Lookalike', target: 'Premium alƒ±cƒ±lar LAL 1-2%', bht: 'Conversion', kpi: 'ROAS' }
                ],
                tiktok: [
                    { type: 'Interest', target: 'Wellness, Fitness, Lifestyle', bht: 'Awareness', kpi: 'Video Views' },
                    { type: 'Behavior', target: 'Premium i√ßerik izleyicileri', bht: 'Consideration', kpi: 'Engagement' },
                    { type: 'Hashtag', target: '#wellness #premium', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'Creator', target: 'Wellness influencerlarƒ±', bht: 'Consideration', kpi: 'Follows' },
                    { type: 'Retargeting', target: 'Etkile≈üimli kullanƒ±cƒ±lar 7 g√ºn', bht: 'Conversion', kpi: 'Conversions' }
                ],
                dv360: [
                    { type: 'Affinity', target: 'Saƒülƒ±k & Fitness, Gurmeler', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'In-Market', target: 'Saƒülƒ±klƒ± Gƒ±da, Premium', bht: 'Consideration', kpi: 'CTR' },
                    { type: 'Custom Intent', target: 'premium kahve, organik', bht: 'Consideration', kpi: 'Site Visits' },
                    { type: 'Remarketing', target: 'Y√ºksek deƒüerli ziyaret√ßiler', bht: 'Conversion', kpi: 'ROAS' }
                ]
            },
            'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler': {
                meta: [
                    { type: 'Interest', target: 'Fƒ±rsatlar, ƒ∞ndirimler, Kuponlar', bht: 'Awareness', kpi: 'Reach, Frequency' },
                    { type: 'Interest', target: 'Flash satƒ±≈ülar, √ñd√ºller', bht: 'Awareness', kpi: 'Impressions' },
                    { type: 'Behavior', target: 'Fƒ±rsat avcƒ±larƒ±, Kupon kullanƒ±cƒ±larƒ±', bht: 'Consideration', kpi: 'CTR, Saves' },
                    { type: 'Behavior', target: 'Fiyat kar≈üƒ±la≈ütƒ±rƒ±cƒ±lar', bht: 'Consideration', kpi: 'Link Clicks' },
                    { type: 'Custom Audience', target: 'Sadakat programƒ± √ºyeleri', bht: 'Conversion', kpi: 'Redemptions' },
                    { type: 'Retargeting', target: 'Promosyon sayfasƒ± ziyaret√ßileri', bht: 'Conversion', kpi: 'Conv. Rate' }
                ],
                tiktok: [
                    { type: 'Interest', target: 'Fƒ±rsatlar, Para biriktirme', bht: 'Awareness', kpi: 'Video Views' },
                    { type: 'Behavior', target: 'Fƒ±rsat i√ßerik izleyicileri', bht: 'Consideration', kpi: 'Shares' },
                    { type: 'Hashtag', target: '#indirim #fƒ±rsat #tasarruf', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'Creator', target: 'Fƒ±rsat avcƒ±larƒ±', bht: 'Consideration', kpi: 'Comments' },
                    { type: 'Retargeting', target: 'Profil ziyaret√ßileri', bht: 'Conversion', kpi: 'Downloads' }
                ],
                dv360: [
                    { type: 'Affinity', target: 'Fƒ±rsat Avcƒ±larƒ±, Deƒüer Odaklƒ±', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'In-Market', target: 'Kuponlar & Fƒ±rsatlar', bht: 'Consideration', kpi: 'Clicks' },
                    { type: 'Custom Intent', target: 'indirim, kampanya', bht: 'Consideration', kpi: 'Site Visits' },
                    { type: 'Remarketing', target: 'Sepet terk edenler', bht: 'Conversion', kpi: 'Conversions' }
                ]
            },
            'Eri≈üilebilir Premium T√ºketiciler': {
                meta: [
                    { type: 'Interest', target: 'Kendine √∂d√ºl, Premium atƒ±≈ütƒ±rmalƒ±k, Kahve', bht: 'Awareness', kpi: 'Reach, Views' },
                    { type: 'Interest', target: 'Kolaylƒ±k, Kaliteli √ºr√ºnler', bht: 'Awareness', kpi: 'Impressions' },
                    { type: 'Behavior', target: 'D√ºrt√ºsel alƒ±cƒ±lar, Upgrade√ßƒ±lar', bht: 'Consideration', kpi: 'Engagement' },
                    { type: 'Demographic', target: '≈ûehirli 25-45, Orta-√úst', bht: 'Consideration', kpi: 'LP Views' },
                    { type: 'Custom Audience', target: 'Kahve d√ºkkanƒ± m√ºdavimleri', bht: 'Conversion', kpi: 'Store Visits' },
                    { type: 'Lookalike', target: 'Premium alƒ±cƒ±lar LAL 1-3%', bht: 'Conversion', kpi: 'Purchase Value' }
                ],
                tiktok: [
                    { type: 'Interest', target: 'Kendine √∂d√ºl, Keyifler, Kahve', bht: 'Awareness', kpi: 'Video Views' },
                    { type: 'Behavior', target: 'Keyif i√ßerik izleyicileri', bht: 'Consideration', kpi: 'Engagement' },
                    { type: 'Hashtag', target: '#kendini≈üƒ±mart #kahvekeyfi', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'Creator', target: 'Lifestyle i√ßerik √ºreticileri', bht: 'Consideration', kpi: 'Follows' },
                    { type: 'Retargeting', target: 'Y√ºksek niyetli izleyiciler', bht: 'Conversion', kpi: 'Conversions' }
                ],
                dv360: [
                    { type: 'Affinity', target: 'Kahve Severler, Keyif Arayanlar', bht: 'Awareness', kpi: 'Reach' },
                    { type: 'In-Market', target: 'Kahve, Premium Atƒ±≈ütƒ±rmalƒ±k', bht: 'Consideration', kpi: 'CTR' },
                    { type: 'Custom Intent', target: 'premium kahve, grab go', bht: 'Consideration', kpi: 'Site Visits' },
                    { type: 'Remarketing', target: 'D√∂n√º≈üenler, Y√ºksek deƒüer', bht: 'Conversion', kpi: 'Repeat Purchase' }
                ]
            }
        };

        // Segmentler - T√ºrk√ße isimlerle
        const segments = [
            // Aile Seyahat Planlayƒ±cƒ±larƒ±
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Hafta Sonu Ka√ßamak√ßƒ±larƒ±', x: 65, y: 90, size: 95, tier: 'T1', reason: 'Her hafta sonu yola √ßƒ±kƒ±yor, en y√ºksek temas frekansƒ±.', strategy: '"Hafta Sonu Paketi" - Kahve + Sandvi√ß + Atƒ±≈ütƒ±rmalƒ±k combo' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Aile Yol Gezisi Tutkunlarƒ±', x: 55, y: 70, size: 90, tier: 'T1', reason: 'Uzun yol = √ßoklu durak, y√ºksek basket size.', strategy: '"Yol Arkada≈üƒ±" - Uzun yol seti, ara√ß i√ßi √ºr√ºnler' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'G√ºvenlik √ñncelikli Maceracƒ±lar', x: 75, y: 65, size: 75, tier: 'T2', reason: 'Kalite/g√ºvenlik i√ßin premium √∂demeye hazƒ±r.', strategy: '"G√ºvenle Yolculuk" - Kalite vurgulu √ºr√ºnler' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Tema Parkƒ± Meraklƒ±larƒ±', x: 45, y: 60, size: 70, tier: 'T2', reason: 'Sƒ±k seyahat eden aile profili.', strategy: 'Aile paketi promosyonlarƒ±' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Aile Kamp Planlayƒ±cƒ±larƒ±', x: 40, y: 55, size: 65, tier: 'T2', reason: 'Pratik √ºr√ºn ihtiyacƒ± y√ºksek.', strategy: '"Kamp Essentials" - Buz, su, pratik gƒ±da' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Sezonluk Tatilciler', x: 50, y: 25, size: 60, tier: 'T3', reason: 'Yƒ±lda 1-2 kez seyahat.', strategy: 'Sezonsal kampanyalar' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: '√áok Ku≈üaklƒ± Planlayƒ±cƒ±lar', x: 60, y: 35, size: 55, tier: 'T3', reason: 'B√ºy√ºk aile = b√ºy√ºk basket.', strategy: 'Aile boyu paketler' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Eƒüitici Gezi Arayanlar', x: 55, y: 30, size: 45, tier: 'T3', reason: 'Ni≈ü kitle.', strategy: 'K√ºlt√ºr rotasƒ± lokasyonlarƒ±' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'Seyahat Puanƒ± Optimizecileri', x: 30, y: 75, size: 50, tier: 'T4', reason: 'Sadakat d√º≈ü√ºk.', strategy: 'Puan √ßarpanƒ±' },
            { parent: 'Aile Seyahat Planlayƒ±cƒ±larƒ±', name: 'B√ºt√ße Dostu Aile Tatilcileri', x: 20, y: 45, size: 55, tier: 'T4', reason: '√áok fiyat hassas.', strategy: 'Private label odaklƒ±' },

            // Deneyim Odaklƒ± ≈ûehirli Premiumlar
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: '≈ûehirli Wellness Arayanlar', x: 85, y: 70, size: 90, tier: 'T1', reason: 'G√ºnl√ºk rit√ºeller, premium kahve alƒ±≈ükanlƒ±ƒüƒ±.', strategy: 'Protein bar, cold-pressed juice' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Premium Teknoloji √ñnc√ºleri', x: 80, y: 75, size: 75, tier: 'T1', reason: 'Hƒ±z odaklƒ±, grab & go.', strategy: 'Specialty coffee, mobil ≈üarj' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'L√ºks Macera Gezginleri', x: 75, y: 85, size: 65, tier: 'T2', reason: 'Kaliteli √ºr√ºn arar.', strategy: 'Trail mix, premium su' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Premium Seyahat Ustalarƒ±', x: 70, y: 90, size: 55, tier: 'T2', reason: 'Y√ºksek kalite beklentisi.', strategy: 'Gourmet kahve, artisan √ßikolata' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'K√ºlt√ºrel Deneyim Koleksiyoncularƒ±', x: 50, y: 65, size: 55, tier: 'T2', reason: '≈ûehirlerarasƒ± k√ºlt√ºr turlarƒ±.', strategy: 'Yerel lezzetler' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Fine Dining Tutkunlarƒ±', x: 45, y: 85, size: 50, tier: 'T3', reason: 'Convenience food ilgi alanƒ± deƒüil.', strategy: 'Artisan snack' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'L√ºks Ya≈üam Tarzƒ± Meraklƒ±larƒ±', x: 55, y: 95, size: 45, tier: 'T3', reason: '√ñzel kanal tercihi.', strategy: 'Premium imaj' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Butik Moda Takip√ßileri', x: 40, y: 70, size: 40, tier: 'T4', reason: 'Market d√º≈ü√ºk √∂ncelik.', strategy: 'D√º≈ü√ºk potansiyel' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Sanat & Tiyatro Hamileri', x: 35, y: 60, size: 45, tier: 'T4', reason: 'Rutin alƒ±≈üveri≈ü az.', strategy: 'D√º≈ü√ºk potansiyel' },
            { parent: 'Deneyim Odaklƒ± ≈ûehirli Premiumlar', name: 'Yat & Country Club √úyeleri', x: 30, y: 95, size: 30, tier: 'T4', reason: 'Kapalƒ± ekosistem.', strategy: 'Ula≈üƒ±lamaz' },

            // Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Flash ƒ∞ndirim Tutkunlarƒ±', x: 75, y: 90, size: 85, tier: 'T1', reason: 'Anlƒ±k fƒ±rsat = hemen alƒ±r.', strategy: 'G√ºnl√ºk flash deal' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Puan & √ñd√ºl Koleksiyoncularƒ±', x: 55, y: 85, size: 80, tier: 'T1', reason: 'Program sadakati.', strategy: 'Puan √ßarpanƒ±' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Fƒ±rsat Avcƒ±sƒ± Alƒ±≈üveri≈ü√ßiler', x: 80, y: 75, size: 75, tier: 'T2', reason: 'Aktif fƒ±rsat arayƒ±≈üƒ±.', strategy: 'Haftalƒ±k insert' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Sadece Temel ƒ∞htiya√ß Alƒ±cƒ±larƒ±', x: 60, y: 65, size: 75, tier: 'T2', reason: 'D√ºzenli ihtiya√ß.', strategy: 'Temel √ºr√ºn fiyat liderliƒüi' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'ƒ∞ndirim Maksimizecileri', x: 85, y: 70, size: 70, tier: 'T2', reason: 'Promosyon takip√ßisi.', strategy: '√áoklu al kampanyalarƒ±' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Jenerik Marka Se√ßiciler', x: 90, y: 60, size: 65, tier: 'T3', reason: 'Private label sadƒ±k.', strategy: 'PO √∂zel marka' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'ƒ∞ndirim K√∂≈üesi Gezginleri', x: 85, y: 45, size: 50, tier: 'T3', reason: 'ƒ∞ndirim k√∂≈üesi avcƒ±sƒ±.', strategy: 'Endcap' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Toplu Alƒ±m Yapanlar', x: 70, y: 35, size: 55, tier: 'T4', reason: 'Format uyumsuz.', strategy: 'D√º≈ü√ºk √∂ncelik' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'Fiyat E≈üleme Talep Edenler', x: 95, y: 50, size: 45, tier: 'T4', reason: 'Operasyonel y√ºk.', strategy: 'Y√ºksek efor' },
            { parent: 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler', name: 'ƒ∞kinci El & Tasarruf Alƒ±≈üveri≈ü√ßileri', x: 80, y: 30, size: 35, tier: 'T4', reason: 'Yeni √ºr√ºn alƒ±mƒ± d√º≈ü√ºk.', strategy: 'Hedef dƒ±≈üƒ±' },

            // Eri≈üilebilir Premium T√ºketiciler
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Kolaylƒ±k Premium Arayanlar', x: 90, y: 80, size: 95, tier: 'S√ºper', reason: 'Hƒ±z + kalite kombini. Premium Market i√ßin bi√ßilmi≈ü kaftan.', strategy: '"2 Dakika Garantisi" - Grab & Go premium' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Kendine √ñd√ºl Verenler', x: 95, y: 70, size: 90, tier: 'S√ºper', reason: '"Bunu hak ettim" anƒ±, en y√ºksek impuls.', strategy: '"Bug√ºn Senin G√ºn√ºn" - Premium √ßikolata' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'G√ºnl√ºk Premium Y√ºkseltmeciler', x: 75, y: 75, size: 85, tier: 'T1', reason: 'Her g√ºn k√º√ß√ºk upgrade.', strategy: '"Upgrade Your Day"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Premium Kahve Tutkunlarƒ±', x: 70, y: 85, size: 85, tier: 'T1', reason: 'Kahve = g√ºnl√ºk rit√ºel.', strategy: '"6. Kahve Bedava"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Son Dakika Premium √ñdeyiciler', x: 85, y: 75, size: 80, tier: 'T1', reason: 'Acil ihtiya√ßta premium √∂der.', strategy: '"ƒ∞htiya√ß Anƒ±nda"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Talep √úzerine Ya≈üam Tarzƒ±', x: 80, y: 70, size: 75, tier: 'T2', reason: 'Hƒ±z > fiyat.', strategy: '"Pre-Order & Pick"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Kalite Bilin√ßli D√ºrt√ºsel Alƒ±cƒ±lar', x: 85, y: 80, size: 70, tier: 'T2', reason: 'Kalite filtreli impuls.', strategy: '"Haftanƒ±n Ke≈üfi"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Organik & Doƒüal Se√ßiciler', x: 55, y: 85, size: 60, tier: 'T2', reason: 'Saƒülƒ±k bilin√ßli.', strategy: '"Clean Label Corner"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Artisan √úr√ºn Destek√ßileri', x: 50, y: 90, size: 45, tier: 'T3', reason: '√áok se√ßici.', strategy: '"Yerel Lezzet"' },
            { parent: 'Eri≈üilebilir Premium T√ºketiciler', name: 'Abonelik Servisi Benimseyenler', x: 40, y: 70, size: 55, tier: 'T4', reason: 'Abonelik odaklƒ±.', strategy: 'D√º≈ü√ºk potansiyel' },
        ];

        const parentColors = {
            'Aile Seyahat Planlayƒ±cƒ±larƒ±': { bg: 'rgba(33,150,243,0.25)', border: '#2196f3' },
            'Deneyim Odaklƒ± ≈ûehirli Premiumlar': { bg: 'rgba(156,39,176,0.25)', border: '#9c27b0' },
            'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler': { bg: 'rgba(255,152,0,0.25)', border: '#ff9800' },
            'Eri≈üilebilir Premium T√ºketiciler': { bg: 'rgba(76,175,80,0.25)', border: '#4caf50' }
        };

        const tierConfig = {
            'S√ºper': { icon: '‚≠ê', class: 'tier-super' },
            'T1': { icon: 'T1', class: 'tier-t1' },
            'T2': { icon: 'T2', class: 'tier-t2' },
            'T3': { icon: 'T3', class: 'tier-t3' },
            'T4': { icon: 'T4', class: 'tier-t4' }
        };

        const axisLabels = {
            'Aile Seyahat Planlayƒ±cƒ±larƒ±': { x: 'Premium A√ßƒ±klƒ±k', y: 'Frekans', size: 'Potansiyel' },
            'Deneyim Odaklƒ± ≈ûehirli Premiumlar': { x: 'Convenience', y: 'Premium Kapasite', size: 'Pazar' },
            'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler': { x: 'Fiyat Odaklƒ±lƒ±k', y: 'Alƒ±≈üveri≈ü Frekansƒ±', size: 'Hacim' },
            'Eri≈üilebilir Premium T√ºketiciler': { x: 'D√ºrt√ºsellik', y: 'Premium ƒ∞stek', size: 'Deƒüer' }
        };

        let canvas, ctx, selectedSegment = null, currentFilter = 'all', currentView = 'all';
        let selectedBhtQuestions = new Set();
        const padding = 55;

        function init() {
            canvas = document.getElementById('quadrantCanvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('click', handleClick);
            canvas.addEventListener('mouseleave', () => document.getElementById('tooltip').style.display = 'none');
            renderSegmentList();
            draw();
        }

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            draw();
        }

        function renderSegmentList() {
            const groups = {};
            segments.forEach((seg, idx) => {
                if (!groups[seg.parent]) groups[seg.parent] = [];
                groups[seg.parent].push({ ...seg, index: idx });
            });

            const list = document.getElementById('segmentList');
            list.innerHTML = '';

            Object.entries(groups).forEach(([parent, segs]) => {
                const colors = parentColors[parent];
                const div = document.createElement('div');
                div.className = 'segment-group';
                div.innerHTML = `
                    <div class="segment-group-header" style="border-left-color:${colors.border};" onclick="toggleGroup(this)">
                        <span>${parent}</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="segment-items open">
                        ${segs.map(seg => `
                            <div class="segment-item ${selectedSegment === seg.index ? 'selected' : ''}" data-index="${seg.index}" onclick="selectSegment(${seg.index})">
                                <div class="tier-badge ${tierConfig[seg.tier].class}">${tierConfig[seg.tier].icon}</div>
                                <span class="segment-name">${seg.name}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function toggleGroup(header) {
            const items = header.nextElementSibling;
            items.classList.toggle('open');
            header.querySelector('span:last-child').textContent = items.classList.contains('open') ? '‚ñº' : '‚ñ∂';
        }

        function getFilteredSegments() {
            let filtered = segments;
            if (currentFilter !== 'all') {
                const tierMap = { 'super': 'S√ºper', 't1': 'T1', 't2': 'T2', 't3': 'T3', 't4': 'T4' };
                filtered = segments.filter(s => s.tier === tierMap[currentFilter]);
            }
            if (currentView !== 'all') {
                filtered = filtered.filter(s => s.parent === currentView);
            }
            return filtered;
        }

        function draw() {
            const width = canvas.width, height = canvas.height;
            ctx.fillStyle = '#0f0f1a';
            ctx.fillRect(0, 0, width, height);

            const chartWidth = width - padding * 2, chartHeight = height - padding * 2;
            const centerX = padding + chartWidth / 2, centerY = padding + chartHeight / 2;

            // Quadrant backgrounds
            ctx.fillStyle = 'rgba(255,152,0,0.04)';
            ctx.fillRect(padding, padding, chartWidth / 2, chartHeight / 2);
            ctx.fillStyle = 'rgba(76,175,80,0.06)';
            ctx.fillRect(centerX, padding, chartWidth / 2, chartHeight / 2);
            ctx.fillStyle = 'rgba(244,67,54,0.04)';
            ctx.fillRect(padding, centerY, chartWidth / 2, chartHeight / 2);
            ctx.fillStyle = 'rgba(33,150,243,0.04)';
            ctx.fillRect(centerX, centerY, chartWidth / 2, chartHeight / 2);

            // Grid
            ctx.strokeStyle = 'rgba(255,255,255,0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(padding + (chartWidth / 10) * i, padding);
                ctx.lineTo(padding + (chartWidth / 10) * i, height - padding);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(padding, padding + (chartHeight / 10) * i);
                ctx.lineTo(width - padding, padding + (chartHeight / 10) * i);
                ctx.stroke();
            }

            // Axes
            ctx.strokeStyle = 'rgba(255,255,255,0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, padding);
            ctx.lineTo(centerX, height - padding);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(padding, centerY);
            ctx.lineTo(width - padding, centerY);
            ctx.stroke();

            // Quadrant labels
            ctx.font = '10px Segoe UI';
            ctx.fillStyle = 'rgba(255,255,255,0.4)';
            ctx.textAlign = 'center';
            ctx.fillText('YATIRIM GEREKLƒ∞', padding + chartWidth / 4, padding + 20);
            ctx.fillText('üéØ √ñNCELƒ∞K', centerX + chartWidth / 4, padding + 20);
            ctx.fillText('D√ú≈û√úK PRƒ∞ORƒ∞TE', padding + chartWidth / 4, height - padding - 10);
            ctx.fillText('HACƒ∞M OYUNU', centerX + chartWidth / 4, height - padding - 10);

            // Draw segments
            const filtered = getFilteredSegments();
            filtered.forEach((seg, i) => {
                const realIdx = segments.indexOf(seg);
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const size = (seg.size / 100) * 30 + 10;
                const colors = parentColors[seg.parent];

                // Selection glow
                if (selectedSegment === realIdx) {
                    ctx.beginPath();
                    ctx.arc(x, y, size + 6, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(227,30,36,0.3)';
                    ctx.fill();
                }

                // Bubble
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fillStyle = colors.bg;
                ctx.fill();
                ctx.strokeStyle = colors.border;
                ctx.lineWidth = selectedSegment === realIdx ? 3 : 2;
                ctx.stroke();

                // Tier icon
                ctx.fillStyle = tierConfig[seg.tier].class === 'tier-super' ? '#ffd700' : '#fff';
                ctx.font = `bold ${size > 20 ? 10 : 8}px Segoe UI`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(tierConfig[seg.tier].icon, x, y);
            });
        }

        function handleMouseMove(e) {
            const rect = canvas.getBoundingClientRect();
            const mx = e.clientX - rect.left, my = e.clientY - rect.top;
            const chartWidth = canvas.width - padding * 2, chartHeight = canvas.height - padding * 2;

            let found = null;
            getFilteredSegments().forEach(seg => {
                const realIdx = segments.indexOf(seg);
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const size = (seg.size / 100) * 30 + 10;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) found = { seg, realIdx };
            });

            const tooltip = document.getElementById('tooltip');
            if (found) {
                canvas.style.cursor = 'pointer';
                const seg = found.seg;
                const labels = axisLabels[seg.parent];
                tooltip.innerHTML = `
                    <div style="font-weight:600;margin-bottom:6px;">${seg.name}</div>
                    <div style="color:#888;font-size:10px;margin-bottom:8px;">${seg.parent}</div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px;font-size:10px;">
                        <div>${labels.x}: <strong style="color:#e31e24;">${seg.x}</strong></div>
                        <div>${labels.y}: <strong style="color:#e31e24;">${seg.y}</strong></div>
                        <div>${labels.size}: <strong style="color:#e31e24;">${seg.size}</strong></div>
                        <div>Tier: <strong>${seg.tier}</strong></div>
                    </div>
                `;
                tooltip.style.display = 'block';
                tooltip.style.left = (e.clientX + 15) + 'px';
                tooltip.style.top = (e.clientY + 15) + 'px';
            } else {
                canvas.style.cursor = 'default';
                tooltip.style.display = 'none';
            }
        }

        function handleClick(e) {
            const rect = canvas.getBoundingClientRect();
            const mx = e.clientX - rect.left, my = e.clientY - rect.top;
            const chartWidth = canvas.width - padding * 2, chartHeight = canvas.height - padding * 2;

            let found = null;
            getFilteredSegments().forEach(seg => {
                const realIdx = segments.indexOf(seg);
                const x = padding + (seg.x / 100) * chartWidth;
                const y = padding + ((100 - seg.y) / 100) * chartHeight;
                const size = (seg.size / 100) * 30 + 10;
                if (Math.sqrt((mx - x) ** 2 + (my - y) ** 2) < size) found = realIdx;
            });

            selectSegment(found);
        }

        function selectSegment(index) {
            selectedSegment = index;
            renderSegmentList();
            draw();

            const defaultDetail = document.getElementById('defaultDetail');
            const selectedDetail = document.getElementById('selectedDetail');
            const bottomPanel = document.getElementById('bottomPanel');

            if (index !== null) {
                const seg = segments[index];
                const labels = axisLabels[seg.parent];
                const tier = tierConfig[seg.tier];
                const recommendations = segmentBhtRecommendations[seg.parent] || [];

                defaultDetail.style.display = 'none';
                selectedDetail.style.display = 'block';
                bottomPanel.classList.add('active');

                document.getElementById('detailTier').className = 'tier-badge ' + tier.class;
                document.getElementById('detailTier').textContent = tier.icon;
                document.getElementById('detailName').textContent = seg.name;
                document.getElementById('detailParent').textContent = seg.parent;
                document.getElementById('metricX').textContent = seg.x;
                document.getElementById('metricY').textContent = seg.y;
                document.getElementById('metricSize').textContent = seg.size;
                document.getElementById('metricTier').textContent = seg.tier;
                document.getElementById('metricXLabel').textContent = labels.x;
                document.getElementById('metricYLabel').textContent = labels.y;
                document.getElementById('metricSizeLabel').textContent = labels.size;
                document.getElementById('detailReason').textContent = seg.reason;
                document.getElementById('detailStrategy').textContent = seg.strategy;

                // BHT targets in detail
                const allQuestions = [...bhtQuestions.awareness, ...bhtQuestions.consideration, ...bhtQuestions.conversion];
                const recQuestions = recommendations.map(id => allQuestions.find(q => q.id === id)).filter(Boolean);
                document.getElementById('detailBht').innerHTML = recQuestions.map(q => {
                    const cat = q.id.startsWith('aw') ? 'awareness' : q.id.startsWith('co') ? 'consideration' : 'conversion';
                    return `<div class="bht-item"><span class="bht-badge ${cat}">${cat.charAt(0).toUpperCase()}</span><span>${q.text.substring(0, 50)}...</span></div>`;
                }).join('');

                // Bottom panel
                document.getElementById('bottomSegmentName').textContent = seg.name;
                document.getElementById('bottomSegmentParent').textContent = '/ ' + seg.parent;

                renderBhtQuestions(seg.parent);
                renderPlatformTables(seg.parent);

            } else {
                defaultDetail.style.display = 'block';
                selectedDetail.style.display = 'none';
                bottomPanel.classList.remove('active');
            }
        }

        function renderBhtQuestions(parentSegment) {
            const recommendations = segmentBhtRecommendations[parentSegment] || [];
            selectedBhtQuestions = new Set(recommendations);

            ['awareness', 'consideration', 'conversion'].forEach(cat => {
                const container = document.getElementById(cat + 'Questions');
                container.innerHTML = bhtQuestions[cat].map(q => {
                    const isRec = recommendations.includes(q.id);
                    const isSel = selectedBhtQuestions.has(q.id);
                    return `
                        <div class="bht-question ${isSel ? 'selected' : ''} ${isRec ? 'recommended' : ''}" onclick="toggleBhtQuestion('${q.id}')">
                            <div class="bht-checkbox ${isSel ? 'checked' : ''}">${isSel ? '‚úì' : ''}</div>
                            <div class="bht-question-text">${q.text}</div>
                            ${isRec ? '<span class="bht-tag">√ñnerilen</span>' : ''}
                            ${q.isNew ? '<span class="bht-tag new">Yeni</span>' : ''}
                        </div>
                    `;
                }).join('');
            });

            updateDistribution();
        }

        function toggleBhtQuestion(qId) {
            if (selectedBhtQuestions.has(qId)) {
                selectedBhtQuestions.delete(qId);
            } else {
                selectedBhtQuestions.add(qId);
            }
            if (selectedSegment !== null) {
                renderBhtQuestions(segments[selectedSegment].parent);
            }
        }

        function updateDistribution() {
            let aw = 0, co = 0, cv = 0;
            selectedBhtQuestions.forEach(qId => {
                if (qId.startsWith('aw')) aw++;
                else if (qId.startsWith('co')) co++;
                else if (qId.startsWith('cv')) cv++;
            });

            const total = aw + co + cv;
            if (total === 0) {
                document.getElementById('distributionBar').innerHTML = '<div style="width:100%;text-align:center;color:#666;padding:8px;font-size:10px;">Soru se√ßiniz</div>';
                return;
            }

            const awPct = Math.round((aw / total) * 100);
            const coPct = Math.round((co / total) * 100);
            const cvPct = 100 - awPct - coPct;

            document.getElementById('distributionBar').innerHTML =
                (awPct > 0 ? `<div class="distribution-bar awareness" style="width:${awPct}%">${awPct}%</div>` : '') +
                (coPct > 0 ? `<div class="distribution-bar consideration" style="width:${coPct}%">${coPct}%</div>` : '') +
                (cvPct > 0 ? `<div class="distribution-bar conversion" style="width:${cvPct}%">${cvPct}%</div>` : '');

            const max = Math.max(aw, co, cv, 1);
            document.getElementById('funnelAwareness').style.width = (aw / max * 100) + '%';
            document.getElementById('funnelConsideration').style.width = (co / max * 100) + '%';
            document.getElementById('funnelConversion').style.width = (cv / max * 100) + '%';

            // Recommendation
            let rec = '';
            if (awPct >= 50) rec = 'Awareness aƒüƒ±rlƒ±klƒ± se√ßim ‚Üí Video/Reach kampanyalarƒ± √∂nerilir. Geni≈ü kitle eri≈üimi hedefleyin.';
            else if (coPct >= 50) rec = 'Consideration aƒüƒ±rlƒ±klƒ± ‚Üí Engagement ve trafik kampanyalarƒ±. √úr√ºn detay sayfalarƒ±na y√∂nlendirme.';
            else if (cvPct >= 50) rec = 'Conversion aƒüƒ±rlƒ±klƒ± ‚Üí Retargeting ve store visit kampanyalarƒ±. Maƒüaza trafiƒüi √∂ncelikli.';
            else rec = 'Dengeli daƒüƒ±lƒ±m ‚Üí Full-funnel yakla≈üƒ±m √∂nerilir. Her a≈üama i√ßin kampanya kurgulanmalƒ±.';
            document.getElementById('recommendationText').textContent = rec;
        }

        function renderPlatformTables(parentSegment) {
            const templates = targetingTemplates[parentSegment] || targetingTemplates['Eri≈üilebilir Premium T√ºketiciler'];

            document.getElementById('metaTableBody').innerHTML = templates.meta.map(r =>
                `<tr><td>${r.type}</td><td>${r.target}</td><td><span class="bht-badge ${r.bht.toLowerCase()}">${r.bht.substring(0, 3)}</span></td><td class="kpi-tag">${r.kpi}</td></tr>`
            ).join('');

            document.getElementById('tiktokTableBody').innerHTML = templates.tiktok.map(r =>
                `<tr><td>${r.type}</td><td>${r.target}</td><td><span class="bht-badge ${r.bht.toLowerCase()}">${r.bht.substring(0, 3)}</span></td><td class="kpi-tag">${r.kpi}</td></tr>`
            ).join('');

            document.getElementById('dv360TableBody').innerHTML = templates.dv360.map(r =>
                `<tr><td>${r.type}</td><td>${r.target}</td><td><span class="bht-badge ${r.bht.toLowerCase()}">${r.bht.substring(0, 3)}</span></td><td class="kpi-tag">${r.kpi}</td></tr>`
            ).join('');
        }

        function filterTier(tier) {
            currentFilter = tier;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.tier === tier));
            draw();
        }

        function setView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => {
                const isActive = (view === 'all' && btn.textContent === 'T√ºm√º') ||
                    (view === 'Aile Seyahat Planlayƒ±cƒ±larƒ±' && btn.textContent === 'Aile') ||
                    (view === 'Deneyim Odaklƒ± ≈ûehirli Premiumlar' && btn.textContent === 'Urban') ||
                    (view === 'Deƒüer Odaklƒ± Hƒ±zlƒ± Alƒ±≈üveri≈ü√ßiler' && btn.textContent === 'Deƒüer') ||
                    (view === 'Eri≈üilebilir Premium T√ºketiciler' && btn.textContent === 'Premium');
                btn.classList.toggle('active', isActive);
            });
            draw();
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tab));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.toggle('active', c.id === 'tab-' + tab));
            if (tab === 'quadrant') setTimeout(resizeCanvas, 100);
        }

        function exportPNG() {
            const link = document.createElement('a');
            link.download = 'po-premium-market-quadrant.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        function exportExcel() {
            let html = '<html><head><meta charset="UTF-8"></head><body><table border="1">';
            html += '<tr><th>Ana Segment</th><th>Alt Segment</th><th>X</th><th>Y</th><th>Boyut</th><th>Tier</th><th>Gerek√ße</th><th>Strateji</th></tr>';
            segments.forEach(seg => {
                html += `<tr><td>${seg.parent}</td><td>${seg.name}</td><td>${seg.x}</td><td>${seg.y}</td><td>${seg.size}</td><td>${seg.tier}</td><td>${seg.reason}</td><td>${seg.strategy}</td></tr>`;
            });
            html += '</table></body></html>';
            const blob = new Blob([html], { type: 'application/vnd.ms-excel' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'po-premium-market-segmentler.xls';
            link.click();
        }

        window.onload = init;
    </script>
</body>
</html>
